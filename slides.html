<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Programming for Data Science</title>
<meta name="author" content="Adolfo De Unánue"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.css"/>

<link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/moon.css" id="theme"/>

<link rel="stylesheet" href="mozilla-dark.css"/>
<link rel="stylesheet" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css"/>
<style>
/* Position computations of klipse get confused by reveal.js's scaling.
   Hence, scaling should be disabled with this code.  Fix height of code area
   with scrollbar (use overflow instead of overflow-y to restore CodeMirror
   setting afterwards): */
.reveal section pre { max-height: 70vh; height: auto; overflow: auto; }
/* Reset some reveal.js and oer-reveal settings: */
.reveal section pre .CodeMirror pre { font-size: 2em; box-shadow: none; width: auto; padding: 0.4em; display: block; overflow: visible; }
/* Enlarge cursor: */
.CodeMirror-cursor { border-left: 3px solid black; }
</style>
<script>
    window.klipse_settings = {
        selector: '.language-klipse',
        selector_eval_html: '.language-klipse-html',
        selector_eval_js: '.language-klipse-javascript',
        selector_eval_js: '.language-klipse-js',
        selector_eval_php: '.language-klipse-php',
        selector_eval_python_client: '.language-klipse-python',
        selector_eval_ruby: '.language-klipse-ruby',
        selector_eval_scheme: '.language-klipse-scheme',
        selector_sql: '.language-klipse-sql'
    };
</script>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'http://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<meta name="description" content="Programación para ciencia de datos.">

          <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
          <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>
          <style type='text/css'>
             body {
                font-family: 'Source Sans Pro', sans-serif;
             }
             pre, code {
                font-family: 'Source Code Pro', monospace;
             }
          </style>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h1 class="title">Programming for Data Science</h1><h2 class="author">Adolfo De Unánue</h2><h2 class="date">2019</h2><p class="date">Created: 2019-10-02 Wed 15:10</p>
</section>
<section id="table-of-contents-section">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#/slide-org0b98480"><i>Lectures</i></a></li>
</ul>
</div>
</div>
</section>
<section>
<section id="slide-org0b98480">
<h2 id="org0b98480"><i>Lectures</i></h2>
</section>
</section>
<section>
<section id="slide-orgc05e89c">
<h3 id="orgc05e89c">Licencia</h3>
<p>
Este trabajo se encuentra bajo la Licencia de
</p>

<p>
<b>Creative Commons</b>
</p>

<p>
<b>Attribution ShareAlike 4.0</b>
</p>

<p>
<b>International License.</b>
</p>

<p>
Para ver una copia de esta licencia, Visita:
<a href="http://creativecommons.org/license/by-sa/4.0/">http://creativecommons.org/license/by-sa/4.0/</a>
</p>


</section>
</section>
<section>
<section id="slide-org7ec6c75">
<h3 id="org7ec6c75">Introducción</h3>
</section>
<section id="slide-orgcfdac50">
<h4 id="orgcfdac50">Una encuesta rápida</h4>

</section>
<section id="slide-org60ca0b0">
<h4 id="org60ca0b0"><i>Data science</i> es &#x2026;</h4>
<form><ul>
<li>&#x2026; acerca de datos</li>
<li>&#x2026; utilizar el método científico</li>
<li>&#x2026; soportar la toma de decisiones</li>
<li>&#x2026; aumentar la inteligencia</li>

</ul></form>

</section>
<section id="slide-org8fffc5a">
<h4 id="org8fffc5a">El científico de datos</h4>
<form><ul>
<li>No es acerca de   <code>R</code> o <code>python</code> únicamente</li>

<li>No es acerca de <i>machine learning</i> únicamente</li>

<li>El científico de datos <i>crea</i> <b>producto de datos</b>.</li>

</ul></form>

</section>
<section id="slide-org4e0a20c">
<h4 id="org4e0a20c">Productos de datos</h4>
<form><ul>
<li>Es un sistema tecno-social que procesa datos de sobre un sistema
generador de los mismos para aumentar la inteligencia o capacidades
de acción de un agente externo al sistema.</li>

</ul></form>


</section>
<section id="slide-org59753f7">
<h4 id="org59753f7">Disminución del <i>dolor</i></h4>
<p>
Cualquier barrera, impedancia entre tu cerebro y los datos hará tu
trabajo menos efectivo y te causará mucho dolor.
</p>

<p>
Tener las herramientas adecuadas, saber que esas herramientas existen
y conocer cómo y cuándo utilizarlas es lo que distingue a una persona
experta.
</p>


</section>
<section id="slide-org181e1fb">
<h4 id="org181e1fb">Filosóficamente: <i>Dataísmo</i></h4>
<form><ul>
<li><a href="https://aeon.co/ideas/believing-without-evidence-is-always-morally-wrong">Believing without evidence is always morally wrong</a>,Francisco Mejía
Uribe, Aeon (2018)</li>
<li><a href="https://www.nytimes.com/2013/02/05/opinion/brooks-the-philosophy-of-data.html">The Philosophy of Data</a>, David Brooks,The New York Times (2013)</li>
<li><a href="http://dougengelbart.org/content/view/138">Augmenting Human Intellect: A Conceptual Framework </a>Douglas C. Engelbart (1962)</li>

</ul></form>



</section>
<section id="slide-org157c864">
<h4 id="org157c864">Filosóficamente: <i>Dataísmo</i></h4>
<blockquote>
<p>
A <b>Dataist</b> is someone that trusts Big
Data (above) and computer algorithms, in preference to human
knowledge and wisdom.
</p>

<p>
<b>Homo Deus: A Brief History of Tomorrow</b>. Yuval Noah Harare (2017)
</p>
</blockquote>


</section>
</section>
<section>
<section id="slide-cli">
<h3 id="cli">Línea de comandos</h3>
</section>
<section id="slide-org3befae9">
<h4 id="org3befae9">La computadora</h4>
<p>
Las computadoras sólo hacen cuatro cosas:
</p>

<form><ul>
<li>Ejecutan programas</li>
<li>Almacenan datos</li>
<li>Se comunican entre sí para hacer las cosas recién mencionadas.</li>
<li>Interactúan con nosotros.
<form><ul>
<li>La interacción puede ser gráfica (como están acostumbrados)
conocida también como <b>GUI</b> (<i>Graphical User Interface</i>) vía el
ratón u otro periférico, o desde la línea de comandos, llamada
como <b>CLI</b> (<i>Command Line Interface</i>).</li>

</ul></form></li>

</ul></form>

</section>
<section id="slide-org0662c92">
<h4 id="org0662c92">¿Por qué?</h4>
<p>
En muchas ocasiones, se verán en la necesidad de responder muy rápido y
en una etapa muy temprana del proceso de <b>big data</b> . Las peticiones
regularmente serán cosas muy sencillas, como estadística univariable y es
aquí donde es posible responder con las herramientas mágicas de UNIX.
</p>


</section>
<section id="slide-orgbc12418">
<h4 id="orgbc12418">Línea de comandos</h4>
<p>
La línea de comandos es lo que estará entre nosotros y la computadora
casi todo el tiempo en este curso. De hecho, una lectura obligada<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> es
<a href="http://faculty.georgetown.edu/irvinem/theory/Stephenson-CommandLine-1999.pdf">In the beginning&#x2026;was de command line</a>
de <b>Neal Stephenson</b>, el escritor de
<a href="https://play.google.com/store/books/details/Neal_Stephenson_Cryptonomicon?id=dwAwSzmTHNEC"><b>Criptonomicon</b></a><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>.
</p>


<p>
La <b>CLI</b> es otro programa más de la computadora y su función es
ejecutar otros comandos. El más popular es <code>bash</code>, que es un acrónimo
de <b>Bourne again shell</b>. Aunque en esta clase también usaremos <code>zsh</code><sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>.
</p>

</section>
<section id="slide-orgaa3c671">
<h4 id="orgaa3c671">Archivos y directorios</h4>
<p>
La computadora guarda la información de una manera ordenada. El
sistema encargado de esto es el <code>file system</code>, el cual es básicamente un árbol
de información<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup> que guarda los datos en
una abstracción que llamamos <b>archivos</b> y ordena los archivos en
<b>carpetas</b> o <b>directorios</b>, los cuales a su vez pueden contener otros
<b>directorios</b>.
</p>

<div class="info">
<p>
<b>TODO</b> en los sistemas operativos <code>*nix</code> (como Unix, GNU/Linux,
 FreeBSD, MacOS, etc)  es un <i>archivo</i>.
</p>

</div>


<p>
Muchos de los comandos del <b>CLI</b> o <code>shell</code> tienen que ver con la
manipulación del <code>file system</code>.
</p>

</section>
<section id="slide-org41c6b35">
<h4 id="org41c6b35">Filosofía UNIX</h4>
<p>
Creada originalmente en 1978 por <b>Doug McIlroy</b>, la filosofía de UNIX es
un acercamiento al diseño de software que enaltece el software modular
y minimalista.
</p>

<p>
Han existido varias adaptaciones<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>, pero la que más me gusta es la de
<b>Peter H. Salus</b>,
</p>

<p>
Es importante tener estos principios en mente, ya que ayuda a enmarcar
los conceptos que siguen.
</p>

<blockquote>
<form><ul>
<li>Escribe programas que hagan una cosa y que la hagan bien</li>
<li>Escribe programas que puedan trabajar en conjunto</li>
<li>Escribe programas que puedan manipular <i>streams</i> de texto, ya que
el texto es la interfaz universal.</li>

</ul></form>
</blockquote>




</section>
<section id="slide-orgbf0b1b3">
<h4 id="orgbf0b1b3">Conocer los alrededores</h4>
<div class="outline-text-4" id="text-orgbf0b1b3">
</div>
<ul class="org-ul">
<li><a id="org13b5f50"></a>Navegación en la terminal<br />
<p>
Moverse rápidamente en la <b>CLI</b> es de vital importancia. Teclea en tu <i>terminal</i>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>Anita lava la tina</code>
</pre>
</div>

<p>
Y ahora intenta lo siguiente:
</p>

<form><dl>
<dt><code>Ctrl + a</code></dt><dd>Inicio de la línea</dd>
<dt><code>Ctrl + e</code></dt><dd>Fin de la línea</dd>
<dt><code>Ctrl + r</code></dt><dd>Buscar hacia atrás<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup></dd>
<dt><code>Ctrl + b</code></dt><dd>Mueve el cursor hacia atrás una letra a la vez</dd>
<dt><code>Alt + b</code></dt><dd>Mueve el cursor hacia atrás una palabra a la vez</dd>
<dt><code>Ctrl + f</code></dt><dd>Mueve el cursor hacia adelante una letra a la vez</dd>
<dt><code>Alt + f</code></dt><dd>Mueve el cursor hacia adelante una palabra a la vez</dd>

</dl></form>

</section>
<section>

<form><dl>
<dt><code>Ctrl + k</code></dt><dd>Elimina el resto de la línea (en realidad corta y pone en el búfer circular)</dd>
<dt><code>Ctrl + y</code></dt><dd>Pega la último del búfer.</dd>
<dt><code>Alt  + y</code> </dt><dd>Recorre el búfer circular.</dd>
<dt><code>Ctrl + d</code></dt><dd>Cierra la terminal</dd>
<dt><code>Ctrl + z</code></dt><dd>Manda a <i>background</i> el programa que se está ejecutando</dd>
<dt><code>Ctrl + c</code></dt><dd>Intenta cancelar</dd>
<dt><code>Ctrl + l</code></dt><dd>Limpia la pantalla</dd>

</dl></form>

</section>
<section>

<div class="warning">
<p>
Estas combinaciones de teclas (<i>keybindings</i>) son universales. Te
recomiendo que las practiques y configures tus otras herramientas con
estos mismas combinaciones, por ejemplo <a href="https://support.rstudio.com/hc/en-us/articles/210928128-Emacs-Editor-Keybindings">RStudio</a> ó <a href="https://jupyterlab.readthedocs.io/en/stable/user/interface.html?highlight=emacs#keyboard-shortcuts">JupyterLab</a> .
</p>

</div>


<div class="question">
<p>
¿Qué hacen las siguientes combinaciones?
</p>

<form><ul>
<li><code>Alt  + t</code></li>
<li><code>Alt  + d</code></li>
<li><code>Ctrl + j</code></li>
<li><code>Alt + 2 Alt + b</code></li>

</ul></form>

</div>

<p>
Para tener más información sobre los <i>bindings</i> consulta <a href="https://catonmat.net/bash-emacs-editing-mode-cheat-sheet">aquí</a>.
</p>
</li>

<li><a id="orgb36e1c4"></a>¿Dónde estoy?<br />
<p>
Imprime el nombre del <i>directorio</i> actual
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">pwd</span></code>
</pre>
</div>

<p>
Cambia el directorio un nivel arriba (a el directorio <i>padre</i> <sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">cd</span> ..</code>
</pre>
</div>

<p>
Si quieres regresar al directorio anterior
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">cd</span> -</code>
</pre>
</div>
</li>

<li><a id="org4b66604"></a>Hogar dulce, hogar<br />
<p>
Cambia el directorio <code>$HOME</code> (tu directorio) utilizando <code>~</code>
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">cd</span> ~</code>
</pre>
</div>

<p>
o bien, no pasando ningún argumento
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">cd</span></code>
</pre>
</div>
</li>

<li><a id="orgbeb84c9"></a>¿Qué hay en mi directorio (<i>folder</i>) ?<br />
<p>
<code>ls</code> Lista los contenidos (archivos y directorios) en el
directorio actual, pero no los archivos <i>ocultos</i>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>ls</code>
</pre>
</div>

<p>
Lista los contenidos en formato <i>largo</i> (<code>-l</code>), muestra
  el tamańo de los archivos, fecha de último cambio y permisos
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>ls -l</code>
</pre>
</div>

<p>
Lista los contendios en el directorio actual y todos los
  sub-directorios en una estructura de <i>árbol</i>
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>tree</code>
</pre>
</div>

<p>
Límita la expansión del <i>árbol</i> a dos niveles
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>tree -L 2</code>
</pre>
</div>

<p>
Muestra los archivosshows file sizes (<code>-s</code>) in
  human-readable format (<code>-h</code>)
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>tree -hs</code>
</pre>
</div>
</li>

<li><a id="org2e4e305"></a>¿Qué hay en mi archivo?<br />
<p>
Muestra el principio (<i>head</i>) del archivo, <code>-n</code> especifica el número de líneas (<code>10</code>).
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>head -n10 $<span style="color: #61afef;">f</span></code>
</pre>
</div>

<p>
Muestra la final (<i>tail</i>) del archivo.
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>tail -n10 $<span style="color: #61afef;">f</span></code>
</pre>
</div>

<p>
Muestra la parte final del archivo
  cada segundo (usando <code>watch</code>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>tail -n10 $<span style="color: #61afef;">f</span> | watch -n1</code>
</pre>
</div>


<p>
"seguir" (<i>follows</i>) (<code>-f</code>) la parte final del archivo, cada vez que hay cambios
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>tail -f -n10 $<span style="color: #61afef;">f</span></code>
</pre>
</div>

<div class="info">
<p>
Seguir archivos es útil cuando estás ejecutando un programa que guarda
    información a un archivo, por ejemplo un <i>log</i>
</p>

</div>

<p>
Cuenta las palabras, caracteres y líneas de un archivo
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>wc $<span style="color: #61afef;">f</span></code>
</pre>
</div>
</li>

<li><a id="org838180e"></a>¿Dónde está mi archivo?<br />
<p>
Encuentra el archivo por nombre
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>find -name <span style="color: #98be65;">"&lt;lost_file_name&gt;"</span> -type f</code>
</pre>
</div>

<p>
Encuentra directorios por nombre
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>find -name <span style="color: #98be65;">"&lt;lost_dir_name&gt;"</span> -type d</code>
</pre>
</div>
</li>

<li><a id="org5951d52"></a><i>Wildcards</i>: Globbing<br />
<p>
La línea de comandos permite usar comodines (<i>wildcards</i>)<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup>
para encontrar  archivos:
</p>

<p>
El primer <i>glob</i> que veremos es <code>*</code>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> *</code>
</pre>
</div>

<p>
El <code>shell</code> expandió <code>*</code> para identificarlo con todos los archivos del
directorio actual.
</p>

<p>
Obvio lo puedes usar con otros comandos, como <code>ls</code>:
Listar todos los archivos que tienen una extensión <code>txt</code>
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>ls *.txt</code>
</pre>
</div>

<p>
Listar todos los archivos que contienen <code>a</code> en el nombre y extensión
<code>txt</code>
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>ls *a*.txt</code>
</pre>
</div>

<p>
<code>*</code> no es el único carácter especial. <code>?</code> hace <i>match</i> con cualquier
carácter individual.
</p>

<p>
Listar todos los archivos que tienen 5 caracteres en el nombre:
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>ls ?????,txt</code>
</pre>
</div>
</li>
</ul>


</section>
<section id="slide-org840e20c">
<h4 id="org840e20c">Conectando comandos</h4>
<div class="outline-text-4" id="text-org840e20c">
</div>
<ul class="org-ul">
<li><a id="org2bff99b"></a>Entubando<br />
<p>
El símbolo  <code>|</code> (<i>pipe</i>)  “entuba” la salida de un comando al siguiente
comando. Por ejemplo:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>ls -la | wc -l</code>
</pre>
</div>

<p>
La salida de <code>ls -la</code> en lugar de ser impresa en pantalla<sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup> es
enviada a <code>wc -l</code>
</p>

<p>
El siguiente ejemplo utiliza <code>grep</code> para buscar y seleccionar cadenas o patrones
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>seq 50 | grep 3</code>
</pre>
</div>

<p>
Veremos más sobre <code>seq</code> y <code>grep</code> más adelante.
</p>
</li>

<li><a id="orga93dbe3"></a><code>stdin</code>, <code>stdout</code> y <code>stderr</code><br />
<p>
<code>stdin</code> (entrada estándar), <code>stdout</code> (salida estándar) y <code>stderr</code>
(error estándar) son <i>canales</i> de interacción de la terminal. En tu
terminal, todos apuntan a la pantalla, pero es posible
redireccionarlos hacia otros lados.
</p>

<p>
Los tres canales están asignados a los siguientes <i>file descriptors</i><sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup>
</p>

<form><dl>
<dt><code>0</code></dt><dd><code>stdin</code>, el teclado</dd>
<dt><code>1</code></dt><dd><code>stdout</code>, la pantalla</dd>
<dt><code>2</code></dt><dd><code>stderr</code>, la pantalla</dd>

</dl></form>

<p>
Es posible redireccionar por ejemplo,  todos los mensajes de error a
un archivo
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>rm este_archivo_no_existe 2&gt; error.txt</code>
</pre>
</div>


<p>
Si quieres ignorar los errores, puedes mandarlos a un agujero negro<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup> estándar, i.e. <code>/dev/null</code>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>algun_comando 2&gt; /dev/null</code>
</pre>
</div>

<p>
o apuntar <code>stdout</code> y <code>stderr</code> al mismo lado (configuración por
<i>default</i>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>algun_comando 2&gt;&amp;1</code>
</pre>
</div>
</li>

<li><a id="org22aaab0"></a>Redireccionando <i>hacia</i><br />
<p>
Los símbolos <code>&gt;</code>, <code>&gt;&gt;</code> Redireccionan la salida de los comandos a un
sumidero (<i>sink</i>), e.g. un archivo, o la pantalla o la impresora.
</p>

<p>
La salida de <code>ls</code> se guarda en el archivo <code>prueba.bat</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>ls &gt;&gt; prueba.dat</code>
</pre>
</div>

<p>
Similar al ejemplo anterior
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>seq 10 &gt; numeros.txt</code>
</pre>
</div>


<div class="question">
<p>
¿Cuál es la diferencia?
</p>

<p>
<b>TIP</b>: Ejecuta varias veces los ejemplos anteriores
</p>

</div>
</li>

<li><a id="orgd49037e"></a>Redireccionando <i>desde</i><br />
<p>
<code>&lt;</code> Redirecciona desde el archivo
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>sort &lt; prueba.dat <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">A la l&#237;nea de comandos acomoda con sort,</span></code>
<code>sort &lt; prueba.dat &gt; prueba_sort.dat <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Guardar el sort a un archivo.</span></code>
</pre>
</div>

<p>
Incluso puedes hacer
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>&lt; prueba.dat wc -l</code>
</pre>
</div>

<div class="info">
<p>
Esto suena muy similar a
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>cat prueba.dat | wc -l</code>
</pre>
</div>

<p>
<code>&lt; prueba.dat wc -l</code> es más eficiente, ya que no está generando
un subproceso (lo cual puede ser muy importante en procesamiento intensivo.
</p>

</div>
</li>
</ul>


</section>
<section id="slide-org121bab9">
<h4 id="org121bab9">Algunos comandos útiles</h4>
<div class="outline-text-4" id="text-org121bab9">
</div>
<ul class="org-ul">
<li><a id="org308e87d"></a>seq<br />
<p>
Genera secuencias de números
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>seq 5</code>
</pre>
</div>

<p>
La sintaxis es: <code>seq inicio step final</code>. Por ejemplo
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>seq 1 2 10</code>
</pre>
</div>

<p>
genera la secuencia de 1 al 10 de dos en dos.
</p>

<p>
Usando otro separador (<code>-s</code>) que no sea es caracter de espacio
</p>
<div class="org-src-container">

<pre  class="src src-sh"><code>seq -s <span style="color: #98be65;">'|'</span> 10</code>
</pre>
</div>

<p>
Agregando <i>padding</i>
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>seq -w 1 10</code>
</pre>
</div>
</li>

<li><a id="org1045ffd"></a>tr<br />
<p>
Cambia, reemplaza o borra caracteres del <code>stdin</code> al <code>stdout</code>
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Hola mi nombre es Adolfo De Un&#225;nue"</span>  | tr <span style="color: #98be65;">'[:upper]'</span> <span style="color: #98be65;">'[:lower]'</span></code>
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-sh"><code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Hola mi nombre es Adolfo De Un&#225;nue"</span>  | tr -d <span style="color: #98be65;">' '</span></code>
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-sh"><code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Hola mi nombre es Adolfo De Un&#225;nue"</span>  | tr -s <span style="color: #98be65;">' '</span> <span style="color: #98be65;">'_'</span></code>
</pre>
</div>
</li>

<li><a id="org7214e78"></a>wc<br />
<p>
<code>wc</code> significa <i>word count</i>. Este comando cuenta las
palabras,renglones, bytes en el archivo.
</p>

<p>
En nuestro caso nos interesa la bandera <code>-l</code> la cual sirve para contar líneas.
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>seq 30 | grep 3 | wc -l</code>
</pre>
</div>
</li>

<li><a id="orgb0665be"></a>head, tail<br />
<p>
<code>head</code> y <code>tail</code> sirven para explorar visualmente las primeras diez
(<i>default</i>) o las últimas diez (<i>default</i>) renglones del archivo,
respectivamente.
</p>


<div class="org-src-container">

<pre  class="src src-shell"><code>head UFO-Dic-2014.tsv</code>
<code></code>
<code>tail -3 UFO-Dic-2014.tsv</code>
</pre>
</div>
</li>

<li><a id="orge4e3bbb"></a>cat<br />
<p>
<code>cat</code> concatena archivos y/o imprime al <code>stdout</code>
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">'Hola mundo'</span> &gt;&gt; test</code>
<code></code>
<code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">'Adios mundo cruel'</span> &gt;&gt; test</code>
<code></code>
<code>cat test</code>
<code></code>
<code>rm test</code>
</pre>
</div>

</section>
<section>

<p>
Podrías hacer lo mismo, sin utilizar <code>echo</code>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>cat &gt;&gt; test</code>
<code></code>
<code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Teclea Hola mundo</span></code>
<code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Teclea Adios mundo cruel</span></code>
<code></code>
<code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Ctrl-C</span></code>
</pre>
</div>

</section>
<section>

<p>
También podemos concatenar archivos
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>cat UFO-Nov-2014.tsv UFO-Dic-2014.tsv  &gt; UFO-Nov-Dic-2014.tsv</code>
<code>wc -l UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

</section>
<section>

<p>
En el siguiente ejemplo redireccionamos al <code>stdin</code> el archivo como
entrada del <code>wc -l</code> sin generar un nuevo proceso
</p>


<div class="org-src-container">

<pre  class="src src-shell"><code>&lt; numeros.txt wc -l</code>
</pre>
</div>
</li>



<li><a id="org6d2deb6"></a>split<br />
<p>
<code>split</code> hace la función contraria de <code>cat</code>, divide archivos.
Puede hacerlo por tamaño (bytes, <code>-b</code>) o por líneas (<code>-l</code>).
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>split -l 500 UFO-Nov-Dic-2014.tsv</code>
<code>wc -l UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>
</li>

<li><a id="org34c6767"></a>cut<br />
<p>
Con <code>cut</code> podemos dividir el archivo pero por columnas.
Las columnas puede estar definidas como campo (<code>-f</code>, <code>-d</code>), carácter (<code>-c</code>) o bytes (<code>-b</code>).
</p>

<p>
Creemos unos datos de prueba
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Adolfo|1978|F&#237;sico"</span> &gt;&gt; prueba.psv</code>
<code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Paty|1984|Abogada"</span> &gt;&gt; prueba.psv</code>
</pre>
</div>

<p>
Ejecuta los siguientes ejemplos, ¿Cuál es la diferencia?
</p>

<div class="org-src-container">

<pre  class="src src-sh"><code>cut -d&#8217;|&#8217; -f1 prueba.psv</code>
<code>cut -d&#8217;|&#8217; -f1,3 prueba.psv</code>
<code>cut -d&#8217;|&#8217; -f1-3 prueba.psv</code>
</pre>
</div>
</li>



<li><a id="org89bf6a1"></a>uniq<br />
<form><ul>
<li><code>uniq</code> Identifica aquellos renglones consecutivos que son iguales.</li>
<li><code>uniq</code> puede contar (<code>-c</code>), eliminar (<code>-u</code>), imprimir sólo las
duplicadas (<code>-d</code>), etc.</li>

</ul></form>
</li>

<li><a id="org47511f6"></a>sort<br />
<form><ul>
<li><code>sort</code> Ordena el archivo, es muy poderoso, puede ordenar por</li>

</ul></form>
<p>
columnas (<code>-k</code>), usar ordenamiento numérico (<code>-g</code>, <code>-h</code>, <code>-n</code>), mes
(<code>-M</code>), random (<code>-r</code>) etc.
</p>


<div class="org-src-container">

<pre  class="src src-sh"><code>sort -t <span style="color: #98be65;">","</span> -k 2  UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>
</li>


<li><a id="orge15dbef"></a>uniq y sort<br />
<form><ul>
<li>Combinados podemos tener un <code>group by</code>:</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-sh"><code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Group by por estado y fecha</span></code>
<code>cat UFO-Dic-2014.tsv |<span style="color: #98be65;">\</span></code>
<code>    cut -d$<span style="color: #98be65;">'\t'</span> -f1,3 |<span style="color: #98be65;">\</span></code>
<code>    tr <span style="color: #98be65;">'\t'</span> <span style="color: #98be65;">' '</span> |<span style="color: #98be65;">\</span></code>
<code>    cut-d<span style="color: #98be65;">' '</span> -f1,3 |<span style="color: #98be65;">\</span></code>
<code>    sort -k 2 -k 1 |<span style="color: #98be65;">\</span></code>
<code>    uniq -c |<span style="color: #98be65;">\</span></code>
<code>    sort -n -r -k 1 |<span style="color: #98be65;">\</span></code>
<code>    head</code>
</pre>
</div>
</li>


<li><a id="org827d2fc"></a>Hacer varias cosas a la vez<br />
<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Ejecuta un servidor web en el puerto 8888</span></code>
<code>python -m http.server 8888</code>
</pre>
</div>

<p>
Ve a la dirección mostrada en la terminal en tu navegador
</p>

<p>
Si presionas <code>Ctrl+z</code> <i>suspenderás</i> la ejecución de ese programa, pero
no será <b>cancelado</b>. Observa que el <code>shell</code> te devolvió el control de
la terminal. Trata de ver de nuevo la lista de archivos en el
navegador &#x2026; y el navegador se quedará en <i>Waiting for 0.0.0.0 &#x2026;</i>
</p>

</section>
<section>

<p>
Regresa a la terminal y ejecuta
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">jobs</span></code>
</pre>
</div>

<p>
<code>jobs</code> muestra que programas están ejecutándose
y su estatus. En particular, el servidor <code>http</code> está detenido.
</p>

</section>
<section>

<p>
Para activarlo usa
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">fg</span></code>
</pre>
</div>

<p>
<code>fg</code> significa <i>foreground</i>. Interrumpe la ejecución con <code>Ctrl+c</code>.
</p>

<p>
Si quieres ejecutar el servidor y <b>no</b> bloquear la terminal agrega <code>&amp;</code>
al final.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>python -m http.server 8888 &amp;</code>
</pre>
</div>

<p>
De esta manera el servidor está ejecutándose en el <i>background</i>.
</p>

</section>
<section>

<div class="warning">
<p>
Es importante saber que estos procesos o <i>jobs</i> estarán ejecutándose
mientras tu sesión esté activa. Si te desconectas los procesos serán
terminados.
</p>

<p>
Más adelante veremos como solucionar esto.
</p>

</div>
</li>
</ul>

</section>
<section id="slide-orge85a187">
<h4 id="orge85a187">Descargar datos</h4>
<p>
Es posible hacer peticiones de HTTP (<i>http requests</i>)<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup> desde la línea
de comandos.
</p>

<p>
El comando para hacerlo es <code>curl</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>curl http://www.gutenberg.org</code>
</pre>
</div>

<div class="info">
<p>
Si hay redirecciones puedes usar <code>-L</code> para seguir la redirección (por
ejemplo en los casos donde hay un <i>url shortener</i>, como <code>bit.ly</code>.
</p>

</div>

</section>
<section>

<p>
La respuesta (<i>response</i>) incluye el <i>body</i> (lo que ves en el
navegador) y el <i>header</i> (metainformación sobre la petición y
respuesta). Si sólo quieres ver el <i>header</i>
</p>


<div class="org-src-container">

<pre  class="src src-shell"><code>curl -I https://duckduckgo.com</code>
</pre>
</div>

</section>
<section>

<p>
El <i>header</i> contiene un pedazo de información crucial:
el <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">status code</a>. El <i>status code</i> te sirve para ver el estado de la
página:
</p>

<form><ul>
<li>¿La página respondió correctamente? <code>200 OK</code></li>
<li>¿El recurso solicitado no existe? <code>404 File Not Found</code></li>
<li>etc</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>curl -I https://duckduckgo.com 2&gt;/dev/null | head -n 1 | cut -d$<span style="color: #98be65;">' '</span> -f2</code>
</pre>
</div>

<p>
donde:
</p>

<form><ul>
<li><code>2&gt;/dev/null</code>, redirecciona <code>stderr</code> a un agujero negro</li>
<li><code>head -n 1</code>, lee la primera línea únicamente</li>
<li><code>cut -d$' ' -f2</code>, separa la línea usando espacios (<code>' '</code>) y toma el
segundo campo, que contiene el código de estatus <code>HTTP</code>.</li>

</ul></form>


</section>
<section id="slide-org69f00b8">
<h4 id="org69f00b8">Expresiones regulares</h4>
<blockquote>
<p>
In computing, regular expressions provide a concise and flexible means for
identifying strings of text of interest, such as particular characters, words,
or patterns of characters. Regular expressions (abbreviated as regex or
regexp, with plural forms regexes, regexps, or regexen) are written in a
formal language that can be interpreted by a regular expression processor,
a program that either serves as a parser generator or examines text and
identifies parts that match the provided specification.
</p>

<p>
Wikipedia: Regular Expressions
</p>
</blockquote>


<ul class="org-ul">
<li><a id="orgb4303f2"></a>Regexp: Básicos<br />
<form><ul>
<li>Hay varios tipos POSIX, Perl, PHP, GNU/Emacs, etc. Nosotros nos
enfocaremos en <code>POSIX</code>.</li>

</ul></form>

<div class="warning">
<p>
Conocer que tipo de expresiones regulares estás utilizando te quitará
muchos dolores de cabeza.
</p>

<p>
Lee la documentación de tu lenguaje favorito.
</p>

</div>

<form><ul>
<li>Pensar en patrones (<i>patterns</i>).</li>
<li>Operadores básicos
<form><ul>
<li><b>OR</b>  <code>gato|gata</code> hará match con gato o gata.</li>
<li><i>Agrupamiento o precedencia de operadores</i> <code>gat(a|o)</code> tiene el mismo significado que <code>gato|gata</code>.</li>

</ul></form></li>
<li>Cuantificadores
<form><dl>
<dt><code>?</code></dt><dd>0 ó 1</dd>
<dt><code>+</code></dt><dd>uno o más</dd>
<dt><code>*</code></dt><dd>cero o más<sup><a id="fnr.13" class="footref" href="#fn.13">13</a></sup></dd>

</dl></form></li>

</ul></form>

</section>
<section>

<form><ul>
<li>Expresiones básicas
<form><dl>
<dt><code>.</code></dt><dd>Cualquier carácter.</dd>
<dt><code>[ ]</code></dt><dd>Cualquier carácter incluido en los corchetes, e.g. <code>[xyz]</code>, <code>[a-zA-Z0-9-]</code>.</dd>
<dt><code>[^ ]</code></dt><dd>Cualquier caracter individual que n esté en los corchetes, e.g. <code>[^abc]</code>. También puede indicar inicio de líınea (fuera de los corchetes.).</dd>

</dl></form></li>

</ul></form>


</section>
<section>

<form><dl>
<dt><code>\( \)</code> ó <code>( )</code></dt><dd>crea una subexpresión que luego puede ser
invocada con <code>\n</code> donde <code>n</code> es el número de la subexpresión.</dd>

<dt><code>{m,n}</code></dt><dd>Repite lo anterior un número de al menos <code>m</code> veces pero no
mayor a <code>n</code> veces.</dd>
<dt><code>\b</code></dt><dd>representa el límite de palabra.</dd>

</dl></form>
</li>


<li><a id="orge83ff61"></a>Regexp: Ejemplos<br />
<form><ul>
<li>username: <code>[a-z0-9 -]{3,16}</code></li>
<li>contraseña: <code>[a-z0-9 -]{6,18}</code></li>

<li>IP address:</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #8c8c8c;">(</span>25<span style="color: #93a8c6;">[</span>0-5<span style="color: #93a8c6;">]</span>|2<span style="color: #93a8c6;">[</span>0-4<span style="color: #93a8c6;">][</span>0-9<span style="color: #93a8c6;">]</span>|<span style="color: #93a8c6;">[</span>01<span style="color: #93a8c6;">]</span>?<span style="color: #93a8c6;">[</span>0-9<span style="color: #93a8c6;">][</span>0-9<span style="color: #93a8c6;">]</span>?<span style="color: #98be65;">\.</span><span style="color: #8c8c8c;">){</span>3<span style="color: #8c8c8c;">}(</span>25<span style="color: #93a8c6;">[</span>0-5<span style="color: #93a8c6;">]</span>|2<span style="color: #93a8c6;">[</span>0-4<span style="color: #93a8c6;">][</span>0-9<span style="color: #93a8c6;">]</span>|<span style="color: #93a8c6;">[</span>01<span style="color: #93a8c6;">]</span>?<span style="color: #93a8c6;">[</span>0-9<span style="color: #93a8c6;">][</span>0-9<span style="color: #93a8c6;">]</span>?<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>
</li>

<li><a id="org7356398"></a>Regexp: Expresiones de caracteres<br />
<form><ul>
<li><code>[:digit:]</code> Dígitos del 0 al 9.</li>
<li><code>[:alnum:]</code> Cualquier caracter alfanumérico 0 al 9 OR A a la Z OR a a la z.</li>
<li><code>[:alpha:]</code> Caracter alfabético A a la Z OR a a la z.</li>
<li><code>[:blank:]</code> Espacio  o TAB únicamente.</li>

</ul></form>
</li>


<li><a id="org7bcc279"></a>Regexp: ¿Quieres saber más?<br />
<form><ul>
<li><a href="http://tutorialzine.com/2014/12/learn-regular-expressions-in-20-minutes/">Learn Regular Expressions in 20 minutes</a></li>
<li><a href="http://www.codeproject.com/Articles/9099/The-Minute-Regex-Tutorial">The 30 minute regex tutorial</a></li>

</ul></form>
</li>
</ul>





</section>
<section id="slide-org6d14200">
<h4 id="org6d14200">Analizando datos<sup><a id="fnr.14" class="footref" href="#fn.14">14</a></sup>: Comandos avanzados</h4>
<div class="outline-text-4" id="text-org6d14200">
</div>
<ul class="org-ul">
<li><a id="org4287c65"></a>grep<br />
<p>
<code>grep</code> nos permite buscar líneas que tengan un patrón específico. Es
el equivalente a un filtro.
</p>

<p>
La sintáxis es sencilla:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>grep <span style="color: #8c8c8c;">[</span>banderas<span style="color: #8c8c8c;">]</span> patron <span style="color: #8c8c8c;">[</span>archivo<span style="color: #8c8c8c;">]</span></code>
</pre>
</div>


<p>
Por ejemplo, todos los avistamientos en California en Noviembre y
Diciembre de 2014:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>grep <span style="color: #98be65;">"CA"</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

<p>
En una vuelta irónica de esta historia, ellos clasifican posibles
avistamientos como "fraudes" (<i>hoax</i>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>grep <span style="color: #98be65;">"HOAX"</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

</section>
<section>

<p>
Dos banderas importantes de <code>grep</code> son <code>-v</code> (negación/complemento):
</p>


<div class="org-src-container">

<pre  class="src src-shell"><code>grep <span style="color: #98be65;">"HOAX"</span> UFO-Nov-Dic-2014.tsv</code>
<code>grep -v <span style="color: #98be65;">"18:"</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

<p>
y <code>-E</code> (interpretar el patrón como una regex).
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>grep -E <span style="color: #98be65;">"18:|19:|20:"</span> UFO-Nov-Dic-2014.tsv</code>
<code>grep -E <span style="color: #98be65;">"[B|b]lue|[O|o]range"</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>


</section>
<section>

<p>
Otras banderas importantes son las siguientes
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Banderas útiles de <code>grep</code></caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">bandera</th>
<th scope="col" class="org-left">significado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>-i</code></td>
<td class="org-left">Ignora mayúsculas / minúsculas</td>
</tr>

<tr>
<td class="org-left"><code>-o</code></td>
<td class="org-left">Regresa <b>todos</b> los <i>match</i> en lugar de la línea que contiene el <i>match</i></td>
</tr>

<tr>
<td class="org-left"><code>-c</code></td>
<td class="org-left">Cuenta el resultado</td>
</tr>
</tbody>
</table>

</section>
<section>

<p>
Usando estas banderas tenemos una versión más simple que el filtrado anterior
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> grep -i -E <span style="color: #98be65;">"[blue|orange]"</span> UFO-Dic-2014.tsv</code>
</pre>
</div>


<p>
¿Por qué son diferentes los siguientes comandos?
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> grep -c -o -E <span style="color: #98be65;">"[B|b]lue|[O|o]range"</span> UFO-Nov-Dic-2014.tsv  <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Ejecuta una bandera a la vez</span></code>
</pre>
</div>

<p>
y
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> grep -o -E <span style="color: #98be65;">"[B|b]lue|[O|o]range"</span> UFO-Nov-Dic-2014.tsv | sort | uniq -c</code>
</pre>
</div>

</section>
<section>

<p>
Más diversión con expresiones regulares
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> grep <span style="color: #98be65;">"\/[0-9]\{1,2\}\/"</span> UFO-Dic-2014.tsv</code>
<code> grep -v <span style="color: #98be65;">"\/[0-9]\{4\}"</span> UFO-Dic-2014.tsv</code>
<code> grep -E <span style="color: #98be65;">"([aeiou]).*\1"</span> names.txt</code>
<code> <span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"Hola grupo &#191;C&#243;mo est&#225;n?"</span> | grep -oE <span style="color: #98be65;">'\w+'</span></code>
</pre>
</div>
</li>

<li><a id="org2bc8b84"></a>awk<br />
<p>
<code>awk</code> es un lenguaje de programación muy completo, orientado a
archivos de texto que vengan en columnas<sup><a id="fnr.15" class="footref" href="#fn.15">15</a></sup>
</p>

<p>
Un <i>programa</i> de <code>awk</code> consiste en una secuencia de enunciados del tipo patrón-acción:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk  <span style="color: #98be65;">'search pattern { action statement }'</span> <span style="color: #8c8c8c;">[</span>archivo<span style="color: #8c8c8c;">]</span></code>
</pre>
</div>


<p>
<code>awk</code> define algunas variables especiales:
</p>
<form><dl>
<dt><code>$1,$2, $3, ...</code></dt><dd>Valores de las columnas</dd>
<dt><code>$0</code></dt><dd>toda la línea</dd>
<dt><code>FS</code></dt><dd>separador de entrada</dd>
<dt><code>OFS</code></dt><dd>separador de salida</dd>
<dt><code>NR</code></dt><dd>número de la línea actual</dd>
<dt><code>NF</code></dt><dd>número de campos en la línea<sup><a id="fnr.16" class="footref" href="#fn.16">16</a></sup></dd>

</dl></form>

</section>
<section>

<p>
Imprime la Ciudad (<code>City</code>) del avistamiento
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'{ print $2 }'</span> UFO-Nov-2014.tsv</code>
</pre>
</div>

<p>
Otros ejemplos:
</p>

<p>
Verificar el número de columnas en todo el archivo
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'{ print NF }'</span> UFO-Nov-Dic-2014.tsv <span style="color: #98be65;">\</span></code>
<code>      | sort -n | uniq</code>
</pre>
</div>

<p>
Imprimir el número de columnas de cada renglón
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'{ print NF ":" $0 }'</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

</section>
<section>

<p>
Es posible usar <i>tests</i> para imprimir o hacer otra operación:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'{ $2 = ""; print }'</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

<p>
En este ejemplo, sólo se imprimen las líneas que no contienen Ciudad
(<code>City</code>)
</p>



<div class="question">
<p>
¿Cómo verificas que estas líneas tengan 7 columnas, a pesar de no
tener ciudad?
</p>

</div>


</section>
<section>

<p>
Además de <i>tests</i> es posible usar bloques <code>if-then-else</code>:
</p>


<div class="org-src-container">

<pre  class="src src-shell"><code>awk <span style="color: #98be65;">'BEGIN{ FS = "\t" }; { if(NF != 7){ print &gt;&gt; "UFO_fixme.tsv"} \</span></code>
<code><span style="color: #98be65;"> else { print &gt;&gt; "UFO_OK.tsv" } }'</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

<p>
Este es un truco que uso <b>todo</b> el tiempo para mover las líneas con
columnas de más o de menos a otro archivo.
</p>


</section>
<section>

<p>
<code>awk</code> tiene otros dos modificadores: <code>BEGIN</code> y <code>END</code> que indican
<i>cuando</i> debe de ejecutarse las instrucciones, si antes de leer el
archivo (<code>BEGIN</code>) o al terminar de leer el archivo (<code>END</code>)
</p>

<p>
Como un ejemplo sencillo, lo siguiente es equivalente a <code>wc -l</code>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk <span style="color: #98be65;">'END { print NR }'</span>  UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

<p>
La manera de interpretarlo es: <i>luego de leer todo el archivo</i> (<code>END</code>)
<i>imprime el número de línea</i>.
</p>

</section>
<section>

<p>
Podemos hacer operaciones con los datos en las columnas:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk <span style="color: #98be65;">'BEGIN{ FS = "," }; {sum += $1} END {print sum}'</span> data.txt</code>
<code>awk -F, <span style="color: #98be65;">'{sum1+=$1; sum2+=$2;mul+=$2*$3} END {print sum1/NR,sum2/NR,mul/NR}'</span> numbers.dat</code>
<code>awk -F, <span style="color: #98be65;">'$1 &gt; max { max=$1; maxline=$0 }; END { print max, maxline }'</span> numbers.dat</code>
</pre>
</div>



</section>
<section>

<p>
También podemos usar <i>regexs</i> como condicionales, para substituir o para
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>awk <span style="color: #98be65;">'/CA/ { n++ }; END { print n+0 }'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk <span style="color: #98be65;">'{ sub(/FL/,"Florida"); print }'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk <span style="color: #98be65;">'{ gsub(/foo/,"bar"); print }'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk <span style="color: #98be65;">'/baz/ { gsub(/foo/, "bar") }; { print }'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk <span style="color: #98be65;">'!/baz/ { gsub(/foo/, "bar") }; { print }'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk <span style="color: #98be65;">'a != $0; { a = $0 }'</span> <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Como uniq</span></code>
<code>awk <span style="color: #98be65;">'!a[$0]++'</span> <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Remueve duplicados que no sean consecutivos</span></code>
<code>awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'$4 ~/Circle/'</span> UFO-Nov-Dic-2014.tsv</code>
<code>awk -F<span style="color: #98be65;">"[\t]"</span> <span style="color: #98be65;">'</span></code>
<code><span style="color: #98be65;">    BEGIN { conteo=0;}</span></code>
<code><span style="color: #98be65;">        $4 ~/Circle/ { conteo++; }</span></code>
<code><span style="color: #98be65;">    END {</span></code>
<code><span style="color: #98be65;">        print "N&#250;mero de avistamientos circulares en el dataset =",conteo;</span></code>
<code><span style="color: #98be65;">    }'</span> UFO-Nov-Dic-2014.tsv</code>
</pre>
</div>

</section>
<section>

<div class="warning">
<p>

</p>

<p>
Existen (al menos) 3 implementaciones de <code>awk</code>:
</p>

<form><ul>
<li><b>POSIX</b> <code>awk</code>. El estándar</li>

<li><code>gawk</code>, <b><b>GNU awk</b></b> lleno de funcionalidad, más potente y soporta archivos gigantes.</li>

<li><code>mawk</code>, <b><b>Minimal awk</b></b> tiene el mínimo de funcionalidad pero es más rápido.</li>

</ul></form>

<p>
Si estás teniendo problemas para ejecutar algo (como quedarte sin
memoria o que haya funciones que no existen) probablemente no estás
usando <code>gawk</code>. Verifica que tengas esa implementación instalada. Te
ahorrará muchos dolores de cabeza.
</p>

</div>


<p>
Para saber más consulta el manual <a href="https://www.gnu.org/software/gawk/manual/"><b>GNU awk</b> <i>Effective AWK Programming</i></a>
</p>
</li>

<li><a id="orgc9a443b"></a>sed<br />
<p>
A veces queremos <i>editar</i> o cambiar el contenido de nuestros
<i>datasets</i>, por ejemplo, quizá queramos deshacernos de ciertos
renglones (e.g. <i>headers</i> repetidos) o queremos cambiar el valor de
una columna (e.g. cambiar el código <code>1</code> a <code>rojo</code>), <code>sed</code> es la
herramienta que nos ayudará a hacer esto. <code>sed</code> significa <b>stream
editor</b> . Permite editar archivos de manera automática.
</p>

<p>
<code>sed</code> lee el <b>flujo de entrada</b> hasta que encuentra
<code>\n</code>. Lo copia al <b>espacio patrón</b>, y es ahí donde se realizan las
operaciones con los datos. <code>sed</code> contiene un <b>búfer</b> que puede ser
utilizado para mantener una memoria, pero es
opcional, finalmente copia al <b>flujo de salida</b>.
</p>


<p>
Hay mucho, mucho poder en esta herramienta. La sintaxis es
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #8c8c8c;">[</span>banderas<span style="color: #8c8c8c;">]</span> comando/patr&#243;n/<span style="color: #8c8c8c;">[</span>reemplazo<span style="color: #8c8c8c;">]</span>/<span style="color: #8c8c8c;">[</span>modificador<span style="color: #8c8c8c;">]</span> <span style="color: #8c8c8c;">[</span>archivo<span style="color: #8c8c8c;">]</span></code>
</pre>
</div>

</section>
<section>

<p>
Iniciemos con el comando para sustituir: <code>s</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s/foo/bar/'</span> data3.txt</code>
</pre>
</div>

<p>
Si queremos guardar la salida a un archivo, no olvides que hay redirecciones
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s/foo/bar/'</span> &lt; data3.txt &gt; data4.txt</code>
<code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">O tambi&#233;n &lt; data3.txt sed 's/foo/bar/'  &gt; data4.txt</span></code>
</pre>
</div>


</section>
<section>

<p>
Nota lo que sucede en el siguiente ejemplo:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s/uno/UNO/'</span> &lt; texto.txt</code>
</pre>
</div>

<p>
este es el funcionamiento por omisión de <code>sed</code>.
</p>

<div class="info">
<p>

</p>

<p>
Estamos usando <code>/</code>  como separador ya que es el que usa <code>vim</code> o <code>man</code>
(¿Recuerdas el primer ejercicio?), pero en realidad puedes usar
cualquier otro caracter:
</p>

<p>
Guión bajo (<i>underscore</i>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s_uno_UNO_'</span> &lt; texto.txt</code>
</pre>
</div>

<p>
o también dos puntos (<code>:</code>)
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s:uno:UNO:'</span> &lt; texto.txt</code>
</pre>
</div>

<p>
son opciones relativamente populares.
</p>

</div>


</section>
<section>


<p>
Para hacer la sustitución global (i.e. todas las ocurrencias del
patrón en la línea), usamos el modificador <code>g</code>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'s/uno/UNO/g'</span> &lt; texto.txt</code>
</pre>
</div>

<p>
También es posible hacerlo en <i>algunas</i> partes del archivo,
especificando la líneas. Por ejemplo en los siguientes ejemplo
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'3s/foo/bar/'</span>  data3.txt <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">S&#243;lo la tercera linea</span></code>
<code>sed <span style="color: #98be65;">'3!s/foo/bar/'</span>  data3.txt <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Excluye la tercera l&#237;nea</span></code>
<code>sed <span style="color: #98be65;">'2,3s/foo/bar/'</span> data3.txt <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Con rango</span></code>
</pre>
</div>

<p>
Si observas bien, el número de línea funciona como un <i>filtro</i>. Es
posible extender la idea y usar <i>patrones</i>: Sustituir globalmente
<i>foo</i> por <i>bar</i> en las líneas que tengan <code>123</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'/123/s/foo/bar/g'</span>  data3.txt</code>
</pre>
</div>

</section>
<section>

<p>
Podemos mezclar ambas ideas y seleccionar partes del archivo usando
rangos y patrones
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed <span style="color: #98be65;">'/abc/,/456/s/foo/BAR/g'</span>  data3.txt</code>
</pre>
</div>



</section>
<section>

<p>
Otro modificadores importantes son <code>d</code> (<i>delete</i>) y <code>p</code> (<i>print</i>)<sup><a id="fnr.17" class="footref" href="#fn.17">17</a></sup>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> sed -n <span style="color: #98be65;">'2,3p'</span> data3.txt  <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Imprime s&#243;lo las l&#237;neas de la 2 a la 3</span></code>
<code> sed -n <span style="color: #98be65;">'$p'</span> <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Imprime la &#250;ltima l&#237;nea</span></code>
<code> sed <span style="color: #98be65;">'/abc/,/-foo-/d'</span> data3.txt <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Elimina todas las l&#237;neas entre "abc" y "-foo-"</span></code>
<code> sed 1d data2.txt <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Elimina la primera l&#237;nea del archivo</span></code>
</pre>
</div>


</section>
<section>

<p>
En todos los ejemplos anteriores, <code>sed</code> leía la fuente y emitía el
resultado modificado a <code>stdout</code>.  De esta manera, la fuente original no
es modificada. La manera de hacerlo <i>in place</i> con la bandera <code>-i</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>sed -i 1d data2.txt  <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">Elimina la primera l&#237;nea del archivo de manera interactiva</span></code>
</pre>
</div>
</li>
</ul>



</section>
<section id="slide-orgdc5126d">
<h4 id="orgdc5126d"><i>Bash programming</i></h4>
<p>
La mayor parte del tiempo usaremos el <code>shell</code>, para hacer pequeños
<i>scripts</i>, pero existen ocasiones en las cuales es necesario tratar al
<code>shell</code> como un lenguaje de programación<sup><a id="fnr.18" class="footref" href="#fn.18">18</a></sup>
</p>

<ul class="org-ul">
<li><a id="orge233bea"></a>Estructuras de datos<br />
<p>
Las variables son declaradas
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef;">nombre</span>=<span style="color: #98be65;">"Adolfo"</span></code>
</pre>
</div>

<p>
Nota que no hay espacios alrededor del signo de igual. El valor de la
variable se obtiene con el signo de dólares
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #61afef;">nombre</span></code>
</pre>
</div>


<p>
Es posible definir variables que no sean escalares, llamadas arreglos (<code>arrays</code>).
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef;">array</span>=<span style="color: #8c8c8c;">(</span>abc 123 def <span style="color: #98be65;">"programming for data science"</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

<p>
Para acceder a elementos en el arreglo usa la posición e.g. <code>3</code>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #8c8c8c;">{</span><span style="color: #61afef;">array</span><span style="color: #93a8c6;">[</span>3<span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">}</span></code>
</pre>
</div>

<p>
Tambien es posible usar <i>globs</i>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #8c8c8c;">{</span><span style="color: #61afef;">array</span><span style="color: #93a8c6;">[</span>*<span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">}</span></code>
</pre>
</div>

<p>
Para conocer el número de elementos del arreglo
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #8c8c8c;">{</span>#<span style="color: #61afef;">array</span><span style="color: #8c8c8c;">}</span></code>
</pre>
</div>

<div class="warning">
<p>
Los arreglos es un punto donde los diferentes <i>shells</i> ejecutan
diferente.
<code>bash</code> tiene índices basados en <code>0</code>, <code>zsh</code> en <code>1</code>.
</p>

</div>
</li>

<li><a id="orgbb9a12b"></a>Bucles de ejecución, (<i>Loops</i>)<br />
<p>
Los <code>for-loops</code> en <code>bash</code> tienen una estructura muy similar a los de
<code>python</code>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">for</span> var<span style="color: #c678dd; font-weight: bold;"> in</span> iterable; <span style="color: #c678dd; font-weight: bold;">do</span></code>
<code>instrucci&#243;n</code>
<code>instrucci&#243;n</code>
<code>...</code>
<code><span style="color: #c678dd; font-weight: bold;">done</span></code>
</pre>
</div>

<p>
Donde <code>iterable</code> puede construirse con <i>globs</i>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">for</span> i<span style="color: #c678dd; font-weight: bold;"> in</span> *; <span style="color: #c678dd; font-weight: bold;">do</span></code>
<code>  <span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #61afef;">i</span>;</code>
<code><span style="color: #c678dd; font-weight: bold;">done</span></code>
</pre>
</div>

</section>
<section>
<p>
listas,
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">for</span> i<span style="color: #c678dd; font-weight: bold;"> in</span> hola adios mundo cruel; <span style="color: #c678dd; font-weight: bold;">do</span></code>
<code>  <span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #61afef;">i</span>;</code>
<code><span style="color: #c678dd; font-weight: bold;">done</span></code>
</pre>
</div>

<p>
arreglos,
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">for</span> i<span style="color: #c678dd; font-weight: bold;"> in</span> $<span style="color: #61afef;">array</span>; <span style="color: #c678dd; font-weight: bold;">do</span></code>
<code>  <span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #61afef;">i</span>;</code>
<code><span style="color: #c678dd; font-weight: bold;">done</span></code>
</pre>
</div>

</section>
<section>

<p>
E inclusive el horrible formato de <code>C</code>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">for</span> <span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">(</span> <span style="color: #61afef;">i</span> = 0; i &lt; 10; i++ <span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span> <span style="color: #c678dd; font-weight: bold;">do</span></code>
<code>    <span style="color: #61afef; font-weight: bold;">echo</span> $<span style="color: #61afef;">i</span>;</code>
<code><span style="color: #c678dd; font-weight: bold;">done</span></code>
</pre>
</div>

<div class="info">
<p>
También puedes escribirlo en una sola línea:  <code>for i in {a..z}; do echo $i; done</code>
</p>

</div>
</li>

<li><a id="org1ac268c"></a>Funciones<br />
<p>
Las funciones son símbolo de buena programación, ya que encapsulan
comportamiento.
</p>

<p>
La sintaxis es muy simple:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #c678dd; font-weight: bold;">function</span> <span style="color: #61afef;">function_name</span> <span style="color: #8c8c8c;">{</span></code>
<code>    <span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">cuerpo de la funci&#243;n</span></code>
<code><span style="color: #8c8c8c;">}</span></code>
</pre>
</div>

</section>
<section>

<p>
A diferencia de otros lenguajes de programación, no se definen los
argumentos de la función.
</p>

<p>
Para ejecutar la función
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>function_name <span style="color: #98be65;">"Hola mundo"</span> 123</code>
</pre>
</div>

<p>
En este caso <code>"Hola mundo"</code> y <code>123</code> son pasados como argumentos a la
función. Estos pueden ser usados en el cuerpo de la función usando la
posición de los mismos e.g. <code>$1</code> es <code>"Hola mundo"</code>, <code>$2</code> es <code>123</code>, etc.
</p>
</li>


<li><a id="orgcdfe67d"></a>Ejecutar <i>scripts</i><br />
<p>
Para cualquier archivo <i>script</i> es importante que la primera línea del
archivo le diga al <code>shell</code>  que comando usar para ejecutarlo.
</p>

<p>
A la primera línea se conoce como <b>shebang</b> y se representa por <code>#!</code>
seguido de la ruta al ejecutable, e.g.:
</p>

<form><ul>
<li><code>#!/usr/bin/python</code>,</li>
<li><code>#!/bin/bash</code>,</li>
<li><code>#!/usr/bin/env Rscript</code>,</li>
<li>etc.</li>

</ul></form>


<p>
Sin el <code>shebang</code>, para ejecutar el archivo <code>ejemplo.py</code> debes de hacer:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>python ejemplo.py</code>
</pre>
</div>

<p>
pero, si agregamos el <code>shebang</code> <sup><a id="fnr.19" class="footref" href="#fn.19">19</a></sup>, puedes ejecutar el archivo de
la siguiente manera:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>./ejemplo.py</code>
</pre>
</div>

<p>
Te preguntarás ¿Cómo conecto estos <i>scripts</i> con los demás usando <code>|</code>, <code>&gt;</code>, etc?
</p>

<p>
Sencillo: Hay que modificar nuestros <i>scripts</i> de <code>python</code>, <code>R</code> y <code>bash</code> para
leer del <code>stdin</code>.
</p>
</li>

<li><a id="org2aa620a"></a>Python, leyendo de <code>stdin</code><br />
<p>
Un ejemplo mínimo de <code>python</code> es el siguiente:
</p>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #687080; font-style: italic;">#</span><span style="color: #687080; font-style: italic;">!/usr/bin/env python</span></code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">import</span> sys</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">process</span><span style="color: #8c8c8c;">(</span>linea<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #61afef;">linea</span> = <span style="color: #61afef; font-weight: bold;">int</span><span style="color: #8c8c8c;">(</span>linea.strip<span style="color: #93a8c6;">()</span><span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">print</span><span style="color: #8c8c8c;">(</span>f<span style="color: #98be65;">"El triple de {linea} es {linea*3}"</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">for</span> linea <span style="color: #c678dd; font-weight: bold;">in</span> sys.stdin:</code>
<code>    process<span style="color: #8c8c8c;">(</span>linea<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

<p>
Abre <code>nano</code>, copia este código y guarda el archivo como
<code>script.py</code>. Un ejemplo de uso es el que sigue:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>seq 1 1000 | script.py</code>
</pre>
</div>
</li>


<li><a id="org37cafa4"></a>R, leyendo de <code>stdin</code><br />
<p>
El ejemplo en <code>R</code> se ve así:
</p>

<div class="org-src-container">

<pre  class="src src-R"><code><span style="color: #687080; font-style: italic;">#</span><span style="color: #687080; font-style: italic;">!/usr/bin/env Rscript</span></code>
<code></code>
<code>f <span style="color: #da8548; font-weight: bold;">&lt;-</span> file<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"stdin"</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>x <span style="color: #da8548; font-weight: bold;">&lt;-</span> c<span style="color: #8c8c8c;">()</span></code>
<code></code>
<code>open<span style="color: #8c8c8c;">(</span>f<span style="color: #8c8c8c;">)</span></code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">while</span><span style="color: #8c8c8c;">(</span>length<span style="color: #93a8c6;">(</span>line <span style="color: #da8548; font-weight: bold;">&lt;-</span> readLines<span style="color: #b0b1a3;">(</span>f, n = 1<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span> &gt; 0<span style="color: #8c8c8c;">)</span> <span style="color: #8c8c8c;">{</span></code>
<code></code>
<code>  x <span style="color: #da8548; font-weight: bold;">&lt;-</span> c<span style="color: #93a8c6;">(</span>x, as,numeric<span style="color: #b0b1a3;">(</span>line<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span></code>
<code>  print<span style="color: #93a8c6;">(</span>summary<span style="color: #b0b1a3;">(</span>x<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span></code>
<code><span style="color: #8c8c8c;">}</span></code>
<code></code>
<code></code>
<code>close<span style="color: #8c8c8c;">(</span>f<span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>print<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Final summary:"</span><span style="color: #8c8c8c;">)</span></code>
<code>summary<span style="color: #8c8c8c;">(</span>x<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section>

<p>
Ejemplo de uso:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>&lt; /data/numbers.txt script.R</code>
</pre>
</div>
</li>
</ul>


</section>
</section>
<section>
<section id="slide-git">
<h3 id="git">Controlador de versiones <code>git</code></h3>
</section>
<section id="slide-org835cc96">
<h4 id="org835cc96"><i>"Solo" Workflow</i></h4>
<div class="outline-text-4" id="text-org835cc96">
</div>
<ul class="org-ul">
<li><a id="org1240cb2"></a>Crear un repositorio<br />
<p>
El <b>repositorio</b> es la carpeta donde <code>git</code> guarda y gestiona todas
las versiones de los archivos.
</p>

<p>
Crea una carpeta en tu <code>$HOME</code> llamada <code>ds-test</code>, ingresa a
ella e inicializa el repositorio con <code>git init</code>. ¿Notas algún cambio?
¿Qué comando usarías? Hay una carpeta ahí ¿no la ves? ¿Cómo puedes ver
una carpeta oculta?
</p>

<p>
La carpeta <code>.git</code> es la carpeta donde se guarda todo el historial, si
la borras, toda la historia del repositorio se perderá.
</p>

<p>
Podemos verificar que todo esté bien, con el comando <code>status</code>.
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git status</code>
</pre>
</div>
</li>

<li><a id="orga6bbad0"></a>Llevando registro de los cambios a archivo<br />
<p>
Crea un archivo llamado <code>hola.txt</code> en la carpeta <code>ds-test</code>
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>touch hola.txt</code>
<code><span style="color: #61afef; font-weight: bold;">echo</span> <span style="color: #98be65;">"&#161;hola mundo!"</span> &gt; hola.txt</code>
</pre>
</div>

<p>
Ahora ejecuta el siguiente comando
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git status</code>
</pre>
</div>

<p>
El mensaje de <code>untracked files</code> significa que hay archivos en el
repositorio de los cuales  <code>git</code> no está llevando registro, i.e. el
repositorio está <i>sucio</i>.
</p>

</section>
<section>

<p>
<code>Git</code> sigue este flujo:
</p>


<div class="figure">
<p><img src="file:///home/nanounanue/projects/ITAM/programming-for-data-science-2019/images/git-solo.png" alt="git-solo.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Git "solo workflow"</p>
</div>



</section>
<section>

<p>
Para que <code>git</code> lleve el registro (<i>tracking</i>) del archivo, debes de
<b>agregarlo</b> (<code>add</code>):
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git add hola.txt</code>
<code>git status</code>
</pre>
</div>

</section>
<section>

<p>
Ahora <code>git</code> sabe que debe de llevar registro de los cambios de
<code>hola.txt</code>, pero aún se <b>comprometen</b> los cambios al repositorio
(<code>Changes to be commited: ...</code>). Para <i>comitearlos</i><sup><a id="fnr.20" class="footref" href="#fn.20">20</a></sup>:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git commit -m <span style="color: #98be65;">"Commit inicial"</span></code>
</pre>
</div>

<p>
Usamos la bandera <code>-m</code> para agregar un mensaje que nos ayude a
recordar más tarde que se hizo y por qué.
</p>

</section>
<section>

<p>
Si ejecutamos
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git status</code>
</pre>
</div>

<p>
nos indica que todo está actualizado (<code>up to date</code>). Podemos ver la
historia de cambio con <code>git log</code>.
</p>

</section>
<section>

<p>
Edita <code>hola.txt</code> luego, ejecuta <code>git status</code>. ¿Qué observas ahora?
</p>

<p>
La parte clave es <code>no changes added to commit</code>. Hemos cambiado el
archivo, pero aún no están "comprometidas" o guardadas en el repositorio.
Para ver que ha cambiado usamos lo siguiente
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> git diff</code>
</pre>
</div>

<p>
Hagamos <code>commit</code> de estos cambios.
</p>

</section>
<section>

<div class="org-src-container">

<pre  class="src src-shell"><code>git commit -m <span style="color: #98be65;">'actualizamos hola.txt'</span></code>
</pre>
</div>

<p>
Pero <code>git</code> no nos dejará hacer el <i>commit</i>, ya que no lo agregamos antes al índice del
repositorio. Agrégalo y repite el <code>commit</code>
</p>

</section>
<section>

<p>
Modifica de nuevo <code>hola.txt</code>. Observa los cambios y agrégalo. ¿Qué
sucede si vuelves a ejecutar <code>git diff</code>?
</p>

<p>
<code>Git</code> dice que no hay nada, ya que para <code>git</code> no hay diferencia entre
el área de <b>staging</b> y el último <b>commit</b> (llamado <code>HEAD</code>).
Para ver los cambios, ejecuta
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> git diff --staged</code>
</pre>
</div>


<p>
esto muestra las diferencias entre los últimos cambios <b>comiteados</b> y
lo que está en el área de <b>staging</b>. Ahora realiza el <code>commit</code>, verifica
el estatus y revisa la historia.
</p>
</li>

<li><a id="org0d0befe"></a>Explorando el pasado<br />
<p>
Podemos ver los cambios entre diferentes <b>revisiones</b>, podemos usar
la siguiente notación: <code>HEAD~1</code>, <code>HEAD~2</code>, etc. como sigue:
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code> git diff HEAD~1 hola.txt</code>
<code> git diff HEAD~2 hola.txt</code>
</pre>
</div>

<p>
También podemos utilizar el identificador único (el número enorme que
aparece en el <code>git log</code>), inténtalo.
</p>

</section>
<section>

<p>
Modifiquemos de nuevo el archivo <code>hola.txt</code>. ¿Qué tal si nos
equivocamos y queremos regresar los cambios? Podemos ejecutar el
comando
</p>

<div class="org-src-container">

<pre  class="src src-shell"><code>git checkout HEAD hola.txt</code>
</pre>
</div>

<div class="info">
<p>
Nota que <code>git</code> recomienda un <b>shortcut</b> para esta operación: <code>(use
"git checkout -- &lt;file&gt;..." to discard changes in working directory)</code>)
</p>

</div>

<p>
Obviamente aquí podemos regresarnos las versiones que queramos, por lo
que podemos utilizar el identificador único o <code>HEAD~2</code> por ejemplo.
</p>

<p>
Por último, <code>git</code> tiene comandos <code>mv</code> y <code>rm</code> que deben de ser usados
cuando queremos mover o borrar un archivo del repositorio, i.e. <code>git
mv</code> y <code>git rm</code>.
</p>
</li>
</ul>

</section>
<section id="slide-orgaf487c8">
<h4 id="orgaf487c8"><i>Github flow</i></h4>
<p>
Ahora trabajaremos en equipo, el flujo cambia respecto al <i>solo
flow</i>. El cambio se debe a la introducción de nuevos conceptos:
<b>clonar</b>, <b>push/pull</b>, <b>issue</b> y <b>branch</b>.
</p>


<div class="figure">
<p><img src="file:///home/nanounanue/projects/ITAM/programming-for-data-science-2019/images/git-flow.png" alt="git-flow.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Github flow</p>
</div>


<p>
Para entender este diagrama, necesitamos explicar estos nuevos
<b>verbos</b>.
</p>

</section>
<section>

<p>
En <i>github flow</i> es muy importante que:
</p>

<form><ul>
<li>Crees <i>issues</i> y trabajes en ellos.</li>
<li>Idealmente un <i>issue</i> está relacionado con una sóla cosa (arreglar
algo, agregar algo)</li>
<li>Idealmente un <i>issue</i> debe de durar menos de 8 horas.</li>
<li>Hagas muchos <i>commits</i> al día</li>

</ul></form>

<div class="info">
<p>
Hacer  <i>commits</i>  frecuentemente permite que podamos hacer control de
versiones de manera granular. Si un <i>bug</i> aparece, podemos regresar a
versiones pasadas dónde el <i>bug</i> no existía.
</p>

<p>
Otra ventaja es que <i>commits</i> pequeños y frecuentes ayudan a tus
compañeros de trabajo (y tu futuro tú) entiendan mejor cuál es tu
intención.
</p>

</div>

<form><ul>
<li>¡Usa mensajes que tengan sentido!</li>

</ul></form>

</section>
<section>

<p>
En serio, escribe mensajes que tengan sentido
</p>


<div class="figure">
<p><img src="file:///home/nanounanue/projects/ITAM/programming-for-data-science-2019/images/git_commit.png" alt="git_commit.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Imagen de XKCD</p>
</div>

</section>
<section id="slide-org6aac9c7">
<h4 id="org6aac9c7">Ejercicio en equipo</h4>
<div class="outline-text-4" id="text-org6aac9c7">
</div>
<ul class="org-ul">
<li><a id="org874d31a"></a>Setup<br />
<form><ul>
<li>Cuatro personas por equipo, los llamaremos <b>A</b>, <b>B</b>, <b>C</b> y <b>D</b> en lo
que sigue.</li>
<li>Seleccionen a una persona para crear el repositorio, esta será <b>A</b></li>
<li><b>A</b> crea el repositorio <i>privado</i> en su cuenta de <a href="https://github.com">Github</a>, llamado <code>pds-2019</code>.</li>
<li><b>A</b> debe de agregar como <i>colaboradores</i> a <b>B</b>, <b>C</b> y <b>D</b>.</li>
<li><b>A</b> debe de agregarme (<code>@nanounanue</code>) como colaborador de <i>solo
lectura</i>.</li>
<li><b>A</b>, <b>B</b>, <b>C</b> y <b>D</b> deben de <i>clonar</i> el repositorio</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git clone https://github.com/usernameA/pds-2019.git /repositorios/pds-2019</code>
</pre>
</div>
</li>

<li><a id="orgfc16e01"></a>Interactuando<br />
<form><ul>
<li><b>A</b> crea el archivo <code>ml.py</code> (o <code>ml.R</code>) y agrega las siguientes 4
funciones vacías:

<form><ul>
<li><code>load_data</code>, <code>clean_data</code>, <code>store_data</code>, <code>run_ml_pipeline</code></li>

</ul></form></li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git add ml.py</code>
<code>git commit -m <span style="color: #98be65;">"Pipeline de ML"</span></code>
<code>git push origin master</code>
</pre>
</div>


<form><ul>
<li><b>B</b>, <b>C</b> y <b>D</b> hagan <code>pull</code> para obtener los cambios más recientes.</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git pull origin master</code>
</pre>
</div>

<form><ul>
<li><b>TODOS</b> vean lo cambios con <code>git status</code>, <code>git log</code></li>

</ul></form>

</section>
<section>

<form><ul>
<li><b>TODOS</b>: Repártanse el trabajo y cada uno cree uno de los 4 <i>issues</i>
en github con el título <i>Completar función</i> <code>...</code> donde <code>...</code> es el
nombre de la función.</li>
<li><b>TODOS</b>: En su <i>virtual machine</i>, creen un nuevo <i>branch</i>:</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git checkout -b issue-N</code>
</pre>
</div>

<p>
donde <code>N</code> es el número de <i>issue</i> correspondiente.
</p>

<form><ul>
<li><b>TODOS</b>: Verifica que ahora estás en un nuevo <i>branch</i>:</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git branch</code>
</pre>
</div>

</section>
<section>

<form><ul>
<li><b>TODOS</b>: completen sus funciones y creen un <i>pull-request</i>, asignen
a un <code>reviewer</code> a uno de sus compañeros. Asígnen el <i>pull-request</i> a
ustedes mismos. El mensaje del <i>pull-request</i> debe de ser <code>Closes
  #N</code>.</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">En el branch correspondiente (i.e. issue-N)</span></code>
<code>git add ml.py</code>
<code>git commit -m <span style="color: #98be65;">"Completada la funci&#243;n XXXX"</span> <span style="color: #687080; font-style: italic;">#</span><span style="color: #687080; font-style: italic;">Donde XXX es el nombre de la funci&#243;n</span></code>
<code>git push origin issue-M</code>
</pre>
</div>

<form><ul>
<li><b>TODOS</b>: El <i>reviewer</i> debe de solicitar un cambio. El responsable
del <i>pull-request</i> debe de modificarlo en su laptop y hacer <code>push</code>
de nuevo. Agrega un comentario en el <i>thread</i> de comunicación del
<i>pull-request</i>.</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">La persona encargada del PR ...</span></code>
<code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">En el branch correspondiente (i.e. issue-N)</span></code>
<code>git add ml.py</code>
<code>git commit -m <span style="color: #98be65;">"Incorporando los cambios del reviewer"</span> <span style="color: #687080; font-style: italic;">#</span><span style="color: #687080; font-style: italic;">Donde XXX es el nombre de la funci&#243;n</span></code>
<code>git push origin issue-M</code>
</pre>
</div>

</section>
<section>

<form><ul>
<li><b>TODOS</b> El <i>reviewer</i> acepta los cambios.</li>
<li><b>TODOS</b> El responsable hace <i>merge</i> del <i>pullrequest</i> a
<code>master</code>. Borra el <i>branch</i> remoto y bórralo localmente.</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code><span style="color: #687080; font-style: italic;"># </span><span style="color: #687080; font-style: italic;">En la computadora del encargado del PR ...</span></code>
<code>git checkout master</code>
<code>git branch -D issue-N</code>
</pre>
</div>

</section>
<section>

<form><ul>
<li><b>TODOS</b> Cambien a <code>master</code> localmente y actualicen su versión local
con <code>pull</code>.</li>

</ul></form>

<div class="org-src-container">

<pre  class="src src-shell"><code>git checkout master</code>
<code>git pull origin master</code>
</pre>
</div>

<form><ul>
<li><b>TODOS</b> Verifiquen que <code>Github</code> y sus versiones locales están sincronizadas.</li>
<li><b>TODOS</b> Festeja con tus compañeros de equipo que llegaron hasta el final.</li>

</ul></form>
</li>
</ul>


</section>
</section>
<section>
<section id="slide-programming">
<h3 id="programming">Desarrollo de software</h3>
</section>
<section id="slide-org7bee7df">
<h4 id="org7bee7df">El código es para comunicarse con humanos</h4>
<p>
<b>NOTE</b>: Los <i>slides</i> siguientes están basados en el trabajo de Kevin
Wilson (<code>@khwilson</code>)
</p>

<blockquote>
<p>
El <b>código</b> es para humanos, no para computadoras.
</p>
</blockquote>

</section>
<section id="slide-org87e834f">
<h4 id="org87e834f">Lo que escribes</h4>
<aside class="notes">
<p>
Here is an example of a function. Why write this function? Well,
literally, you give the function an integer <b>n</b>, and the function
gives you back the *n*th Fibonnaci number. Writing code allows you to
have the computer calculate the <b>n*th Fibonnaci number, which it can
probably do much faster than you can, especially as *n</b> gets larger
and larger. It also allows your human comrades to see for themselves
how you rattle off arbitrary Fibonacci numbers so fast. But you don't
really write code for the computer&#x2026;
</p>

</aside>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">fib</span><span style="color: #8c8c8c;">(</span>n<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">int n</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The Fibonnaci index you want to return</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The nth Fibonnaci number</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> int</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">if</span> n &lt; 2:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> 1</code>
<code>    <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> fib<span style="color: #8c8c8c;">(</span>n - 1<span style="color: #8c8c8c;">)</span> + fib<span style="color: #8c8c8c;">(</span>n - 2<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-orga187e1b">
<h4 id="orga187e1b">Lo que la computadora ve</h4>
<div class="org-src-container">

<pre  class="src src-:eval"><code>  2           0 LOAD_FAST                0 (n)</code>
<code>              3 LOAD_CONST               1 (2)</code>
<code>              6 COMPARE_OP               0 (&lt;)</code>
<code>              9 POP_JUMP_IF_FALSE       16</code>
<code>  3          12 LOAD_CONST               2 (1)</code>
<code>             15 RETURN_VALUE</code>
<code>  5     &gt;&gt;   16 LOAD_GLOBAL              0 (fib)</code>
<code>             19 LOAD_FAST                0 (n)</code>
<code>             22 LOAD_CONST               2 (1)</code>
<code>             25 BINARY_SUBTRACT</code>
<code>             26 CALL_FUNCTION            1</code>
<code>             29 LOAD_GLOBAL              0 (fib)</code>
<code>             32 LOAD_FAST                0 (n)</code>
<code>             35 LOAD_CONST               1 (2)</code>
<code>             38 BINARY_SUBTRACT</code>
<code>             39 CALL_FUNCTION            1</code>
<code>             42 BINARY_ADD</code>
<code>             43 RETURN_VALUE</code>
<code>             44 LOAD_CONST               0 (None)</code>
<code>             47 RETURN_VALUE</code>
</pre>
</div>

</section>
<section id="slide-orgc089400">
<h4 id="orgc089400">En serio, es para tí</h4>
<form><ul>
<li>&#x2026; dentro de un mes, habrás olvidado completamente en que era esa
&alpha; &#x2026;</li>
<li>&#x2026;o mañana, tu compañero de trabajo se preguntará que son todos
esos <code>3s</code> en la base de datos &#x2026;</li>
<li>&#x2026;o cuando el sistema esté colapsando a las 2 am (la hora de las
brujas en sistemas puestos en producción), y tú estés cansado, y tu
jefe y clientes estén llamándote para saber que demonios está
pasando &#x2026;</li>
<li>Por eso, debes de comunicarte contigo y con tus compañeros humanos</li>

</ul></form>

</section>
<section id="slide-org892d76f">
<h4 id="org892d76f">Da nombres informativos</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">import</span> math</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">doit</span><span style="color: #8c8c8c;">(</span>x<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #61afef;">output</span> = <span style="color: #8c8c8c;">[]</span></code>
<code>    <span style="color: #61afef;">y</span> = 2</code>
<code>    <span style="color: #c678dd; font-weight: bold;">while</span> x != 1:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">if</span> x % y == 0:</code>
<code>            output.append<span style="color: #8c8c8c;">(</span>y<span style="color: #8c8c8c;">)</span></code>
<code>            <span style="color: #61afef;">x</span> //= y</code>
<code>        <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>            <span style="color: #61afef;">y</span> += 1</code>
<code>            <span style="color: #c678dd; font-weight: bold;">continue</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> output</code>
</pre>
</div>

</section>
<section id="slide-org390809f">
<h4 id="org390809f">Da nombres informativos</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">magic</span><span style="color: #8c8c8c;">(</span><span style="color: #61afef; font-weight: bold;">input</span><span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #61afef; font-weight: bold;">filter</span> = <span style="color: #61afef; font-weight: bold;">set</span><span style="color: #8c8c8c;">()</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> <span style="color: #61afef; font-weight: bold;">sorted</span><span style="color: #8c8c8c;">(</span>x <span style="color: #c678dd; font-weight: bold;">for</span> x <span style="color: #c678dd; font-weight: bold;">in</span> y</code>
<code>                    <span style="color: #c678dd; font-weight: bold;">for</span> y <span style="color: #c678dd; font-weight: bold;">in</span> <span style="color: #61afef; font-weight: bold;">input</span></code>
<code>                    <span style="color: #c678dd; font-weight: bold;">if</span> <span style="color: #93a8c6;">(</span><span style="color: #61afef; font-weight: bold;">len</span><span style="color: #b0b1a3;">(</span>x<span style="color: #b0b1a3;">)</span> &lt; 20 <span style="color: #c678dd; font-weight: bold;">and</span> x <span style="color: #c678dd; font-weight: bold;">not</span> <span style="color: #c678dd; font-weight: bold;">in</span> <span style="color: #61afef; font-weight: bold;">filter</span><span style="color: #93a8c6;">)</span> <span style="color: #c678dd; font-weight: bold;">or</span> <span style="color: #61afef; font-weight: bold;">filter</span>.add<span style="color: #93a8c6;">(</span>x<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>


</section>
<section id="slide-org2eb0f24">
<h4 id="org2eb0f24">Da nombres informativos</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">pretty_pictures</span><span style="color: #8c8c8c;">()</span>:</code>
<code>    <span style="color: #61afef;">df</span> = pd.read_csv<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'2016.csv.gz'</span>, names=<span style="color: #93a8c6;">[</span><span style="color: #98be65;">'STATION'</span>, <span style="color: #98be65;">'DATE'</span>, <span style="color: #98be65;">'TYPE'</span>, <span style="color: #98be65;">'VALUE'</span>,</code>
<code>                                           <span style="color: #98be65;">'MEASUREMENT_FLAG'</span>, <span style="color: #98be65;">'QUALITY_FLAG'</span>,</code>
<code>                                           <span style="color: #98be65;">'SOURCE_FLAG'</span>, <span style="color: #98be65;">'OBS_TIME'</span><span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #61afef;">first</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == <span style="color: #98be65;">'US1ILCK0010'</span><span style="color: #8c8c8c;">]</span></code>
<code>    first<span style="color: #8c8c8c;">[</span>first.TYPE == <span style="color: #98be65;">'PRCP'</span><span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'first_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #61afef;">second</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == <span style="color: #98be65;">'US1ILCK0014'</span><span style="color: #8c8c8c;">]</span></code>
<code>    second<span style="color: #8c8c8c;">[</span>second.TYPE == <span style="color: #98be65;">'PRCP'</span><span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'second_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> first<span style="color: #8c8c8c;">[</span>first.TYPE == <span style="color: #98be65;">'PRCP'</span><span style="color: #8c8c8c;">]</span>.mean<span style="color: #8c8c8c;">()</span>, second<span style="color: #8c8c8c;">[</span>second.TYPE == <span style="color: #98be65;">'PRCP'</span><span style="color: #8c8c8c;">]</span>.mean<span style="color: #8c8c8c;">()</span></code>
</pre>
</div>

</section>
<section id="slide-org97c89c7">
<h4 id="org97c89c7">Da nombres informativos</h4>
<form><ul>
<li>Los nombres deben de tener <i>significado</i> para los lectores de tú código, e.g.
<form><ul>
<li>Tú en una semana</li>
<li>Tus compañeros mañana</li>
<li>Tus compañeros del futuro que heredarán tu código</li>

</ul></form></li>

<li>\(i\), \(j\), \(k\) para <i>algunos</i> <b>iteradores</b> está bien, pero &alpha; que hace
referencia a un artículo en específico, NO.</li>
<li><code>kwargs</code> es un gran lugar para nombrar cosas (<code>python</code>)</li>
<li><code>CONSTANTES</code></li>
<li>No le temas a nombres largos; tienes <code>autocomplete</code></li>

</ul></form>

</section>
<section id="slide-org4f38a8d">
<h4 id="org4f38a8d">Documenta entradas y salidas</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">import</span> math</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">factor</span><span style="color: #8c8c8c;">(</span>x<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #61afef;">output</span> = <span style="color: #8c8c8c;">[]</span></code>
<code>    <span style="color: #61afef;">fact</span> = 2</code>
<code>    <span style="color: #c678dd; font-weight: bold;">while</span> x != 1:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">if</span> x % fact == 0:</code>
<code>            output.append<span style="color: #8c8c8c;">(</span>y<span style="color: #8c8c8c;">)</span></code>
<code>            <span style="color: #61afef;">x</span> //= fact</code>
<code>        <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>            <span style="color: #61afef;">fact</span> += 1</code>
<code>            <span style="color: #c678dd; font-weight: bold;">continue</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> output</code>
</pre>
</div>

</section>
<section id="slide-orgf4d5add">
<h4 id="orgf4d5add">Documenta entradas y salidas</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">unique_flatten</span><span style="color: #8c8c8c;">(</span>the_input, max_length=20<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #61afef;">flattened_set</span> = <span style="color: #8c8c8c;">{</span>val <span style="color: #c678dd; font-weight: bold;">for</span> val <span style="color: #c678dd; font-weight: bold;">in</span> row <span style="color: #c678dd; font-weight: bold;">for</span> row <span style="color: #c678dd; font-weight: bold;">in</span> the_input<span style="color: #8c8c8c;">}</span></code>
<code>    <span style="color: #61afef;">filtered_list</span> = <span style="color: #8c8c8c;">[</span>val <span style="color: #c678dd; font-weight: bold;">for</span> val <span style="color: #c678dd; font-weight: bold;">in</span> flattened_set <span style="color: #c678dd; font-weight: bold;">if</span> <span style="color: #61afef; font-weight: bold;">len</span><span style="color: #93a8c6;">(</span>val<span style="color: #93a8c6;">)</span> &lt; max_length<span style="color: #8c8c8c;">]</span></code>
<code>    filtered_list.sort<span style="color: #8c8c8c;">()</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> filtered_list</code>
</pre>
</div>

</section>
<section id="slide-orga296b34">
<h4 id="orga296b34">Documenta entradas y salidas</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #61afef;">WEATHER_HEADERS</span> = <span style="color: #8c8c8c;">[</span><span style="color: #98be65;">'STATION'</span>, <span style="color: #98be65;">'DATE'</span>, <span style="color: #98be65;">'TYPE'</span>, <span style="color: #98be65;">'VALUE'</span>,</code>
<code>                   <span style="color: #98be65;">'MEASUREMENT_FLAG'</span>, <span style="color: #98be65;">'QUALITY_FLAG'</span>,</code>
<code>                   <span style="color: #98be65;">'SOURCE_FLAG'</span>, <span style="color: #98be65;">'OBS_TIME'</span><span style="color: #8c8c8c;">]</span></code>
<code></code>
<code><span style="color: #61afef;">PRECIPITATION_TYPE</span> = <span style="color: #98be65;">'PRCP'</span></code>
<code><span style="color: #61afef;">CHICAGO_STATION_NAMES</span> = <span style="color: #8c8c8c;">[</span><span style="color: #98be65;">'US1ILCK0010'</span>, <span style="color: #98be65;">'US1ILCK0014'</span><span style="color: #8c8c8c;">]</span></code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">precipitation_in_chicago</span><span style="color: #8c8c8c;">()</span>:</code>
<code>    <span style="color: #61afef;">df</span> = pd.read_csv<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'2016.csv.gz'</span>, names=WEATHER_HEADERS<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #61afef;">first</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == CHICAGO_STATION_NAMES<span style="color: #93a8c6;">[</span>0<span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">]</span></code>
<code>    first<span style="color: #8c8c8c;">[</span>first.TYPE == PRECIPITATION_TYPE<span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'first_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #61afef;">second</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == CHICAGO_STATION_NAMES<span style="color: #8c8c8c;">]</span></code>
<code>    second<span style="color: #8c8c8c;">[</span>second.TYPE == PRECIPITATION_TYPE<span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'second_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> <span style="color: #8c8c8c;">(</span>first<span style="color: #93a8c6;">[</span>first.TYPE == PRECIPITATION_TYPE<span style="color: #93a8c6;">]</span>.mean<span style="color: #93a8c6;">()</span>,</code>
<code>            second<span style="color: #93a8c6;">[</span>second.TYPE == PRECIPITATION_TYPE<span style="color: #93a8c6;">]</span>.mean<span style="color: #93a8c6;">()</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-org6ffe4cc">
<h4 id="org6ffe4cc">Documenta entradas y salidas</h4>
<form><ul>
<li>Cada función debe de tener un <i>docstring</i></li>
<li>Los <i>docstring</i> <b>deben</b> de
<form><ul>
<li>Describir la función <i>brevemente</i></li>
<li>Explícitamente documentar las entradas con <code>:param type name: description</code></li>
<li>Explícitamente documantar el valor de retorno con <code>:returns: description</code></li>
<li>Explícitamente documentar el tipo del retorno con <code>:rtype:</code></li>

</ul></form></li>

</ul></form>

</section>
<section id="slide-orgde2b62f">
<h4 id="orgde2b62f">En <code>python 3.6</code> : <i>Static type checking</i></h4>
<p>
En versiones recientes de <code>python</code> es posible <i>indicar</i> el tipo de las
variables:
</p>

<pre><code class="language-klipse-python" >
<code><span style="color: #c678dd; font-weight: bold;">from</span> typing <span style="color: #c678dd; font-weight: bold;">import</span> Dict</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">do_ml_magic</span><span style="color: #8c8c8c;">(</span>algorithm: <span style="color: #61afef; font-weight: bold;">str</span>, hyperparams: Dict<span style="color: #8c8c8c;">)</span> -&gt; Model:</code>
<code>    ...</code>
<code></code>
<code>    train_date: <span style="color: #61afef;">date</span> = ...</code>
<code></code>
<code>    model: <span style="color: #61afef;">Model</span> =  ...</code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> model</code>
</code></pre>

<p>
Estas adiciones son <i>sugerencias</i>, es decir son estáticas. Puedes
verificar tu  código con <code>mypy</code> o con tu editor (como GNU Emacs o PyCharm)
</p>


</section>
<section id="slide-orgd25da6e">
<h4 id="orgd25da6e"><i>Don't repeat yourself: DRY</i></h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">max_intersection</span><span style="color: #8c8c8c;">(</span>left, right<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""</span></code>
<code><span style="color: #9eac8c;">    Compute the value counts of the left and right lists and then return</span></code>
<code><span style="color: #9eac8c;">    the maximum for each value.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    :param list[object] left: The left list</span></code>
<code><span style="color: #9eac8c;">    :param list[object] right: The right list</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> dict[object, int]</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> A dictionary from the value to</span></code>
<code><span style="color: #9eac8c;">        max(# occurrences in left, # occurrences in right)</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">left_counts</span> = <span style="color: #8c8c8c;">{}</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">for</span> val <span style="color: #c678dd; font-weight: bold;">in</span> left:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">if</span> left <span style="color: #c678dd; font-weight: bold;">not</span> <span style="color: #c678dd; font-weight: bold;">in</span> left_counts:</code>
<code>            <span style="color: #61afef;">left_counts</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> = 1</code>
<code>        <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>            <span style="color: #61afef;">left_counts</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> += 1</code>
<code></code>
<code>    <span style="color: #61afef;">right_counts</span> = <span style="color: #8c8c8c;">{}</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">for</span> val <span style="color: #c678dd; font-weight: bold;">in</span> right:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">if</span> right <span style="color: #c678dd; font-weight: bold;">not</span> <span style="color: #c678dd; font-weight: bold;">in</span> right_counts:</code>
<code>            <span style="color: #61afef;">right_counts</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> = 1</code>
<code>        <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>            <span style="color: #61afef;">right_counts</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> += 1</code>
<code></code>
<code>    left_counts.update<span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">{</span>key: <span style="color: #61afef; font-weight: bold;">max</span><span style="color: #b0b1a3;">(</span>left_counts.get<span style="color: #97b098;">(</span>key, 0<span style="color: #97b098;">)</span>, val<span style="color: #b0b1a3;">)</span></code>
<code>                        <span style="color: #c678dd; font-weight: bold;">for</span> key, val <span style="color: #c678dd; font-weight: bold;">in</span> right_counts.items<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">}</span><span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> left_counts</code>
</pre>
</div>

<aside class="notes">
<p>
En este caso, la lógica de conteo es redundante y puede ser abstraída
en una función.
</p>

</aside>

</section>
<section id="slide-org49a5d5b">
<h4 id="org49a5d5b">DRY (o a otros!)</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">value_counts</span><span style="color: #8c8c8c;">(</span>the_list<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""</span></code>
<code><span style="color: #9eac8c;">    :param list[object] the_list: The list whose values we'll count</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> dict[object, int]</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> A dict from the value to its count</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">output</span> = <span style="color: #8c8c8c;">{}</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">for</span> val <span style="color: #c678dd; font-weight: bold;">in</span> the_list:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">if</span> val <span style="color: #c678dd; font-weight: bold;">not</span> <span style="color: #c678dd; font-weight: bold;">in</span> output:</code>
<code>            <span style="color: #61afef;">output</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> = 1</code>
<code>        <span style="color: #c678dd; font-weight: bold;">else</span>:</code>
<code>            <span style="color: #61afef;">output</span><span style="color: #8c8c8c;">[</span>val<span style="color: #8c8c8c;">]</span> += 1</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">max_intersection</span><span style="color: #8c8c8c;">(</span>left, right<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""</span></code>
<code><span style="color: #9eac8c;">    Compute the value counts of the left and right lists and then return</span></code>
<code><span style="color: #9eac8c;">    the maximum for each value.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    :param list[object] left: The left list</span></code>
<code><span style="color: #9eac8c;">    :param list[object] right: The right list</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> dict[object, int]</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> A dictionary from the value to</span></code>
<code><span style="color: #9eac8c;">        max(# occurrences in left, # occurrences in right)</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">left_counts</span> = value_counts<span style="color: #8c8c8c;">(</span>left<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #61afef;">right_counts</span> = value_counts<span style="color: #8c8c8c;">(</span>right<span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    left_counts.update<span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">{</span>key: <span style="color: #61afef; font-weight: bold;">max</span><span style="color: #b0b1a3;">(</span>left_counts.get<span style="color: #97b098;">(</span>key, 0<span style="color: #97b098;">)</span>, val<span style="color: #b0b1a3;">)</span></code>
<code>                        <span style="color: #c678dd; font-weight: bold;">for</span> key, val <span style="color: #c678dd; font-weight: bold;">in</span> right_counts.items<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">}</span><span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> left_counts</code>
</pre>
</div>

<aside class="notes">
<p>
Mucho mejor &#x2026; pero no hay necesidad de inventar la rueda de nuevo
con la función <code>value_count</code> si ya ha sido implementada para tí
</p>

</aside>

</section>
<section id="slide-org99117ff">
<h4 id="org99117ff">DRY (solución)</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">from</span> collections <span style="color: #c678dd; font-weight: bold;">import</span> Counter</code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">max_intersection</span><span style="color: #8c8c8c;">(</span>left, right<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""</span></code>
<code><span style="color: #9eac8c;">    Compute the value counts of the left and right lists and then return</span></code>
<code><span style="color: #9eac8c;">    the maximum for each value.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    :param list[object] left: The left list</span></code>
<code><span style="color: #9eac8c;">    :param list[object] right: The right list</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> dict[object, int]</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> A dictionary from the value to</span></code>
<code><span style="color: #9eac8c;">        max(# occurrences in left, # occurrences in right)</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">left_counts</span> = Counter<span style="color: #8c8c8c;">(</span>left<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #61afef;">right_counts</span> = Counter<span style="color: #8c8c8c;">(</span>right<span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    left_counts.update<span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">{</span>key: <span style="color: #61afef; font-weight: bold;">max</span><span style="color: #b0b1a3;">(</span>left_counts.get<span style="color: #97b098;">(</span>key, 0<span style="color: #97b098;">)</span>, val<span style="color: #b0b1a3;">)</span></code>
<code>                        <span style="color: #c678dd; font-weight: bold;">for</span> key, val <span style="color: #c678dd; font-weight: bold;">in</span> right_counts.items<span style="color: #b0b1a3;">()</span><span style="color: #93a8c6;">}</span><span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> left_counts</code>
</pre>
</div>

</section>
<section id="slide-org3c69bfb">
<h4 id="org3c69bfb"><i>no DRY, WET</i></h4>
<aside class="notes">
<p>
He aquí un ejemplo de una función que hace <i>plots</i>. Lo que está bien:
Hay un <i>docstring</i>, tiene un nombre más o menos informativo. Lo que
está mal: La función hace muchas cosas y  tiene un <code>path</code> <i>hardcoded</i>
(<code>2016.csv.gz</code>)
</p>

</aside>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">precipitation_in_chicago</span><span style="color: #8c8c8c;">()</span>:</code>
<code>    <span style="color: #9eac8c;">""" Saves plots of the precipitation from two Chicago weather stations</span></code>
<code><span style="color: #9eac8c;">    in 2016 to `first_fig.png` and `second_fig.png` and returns the mean</span></code>
<code><span style="color: #9eac8c;">    precipitation at them for the year.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The mean precipitation at two weather stations in 2016</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> (float, float)</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">df</span> = pd.read_csv<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'2016.csv.gz'</span>, names=WEATHER_HEADERS<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #61afef;">first</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == CHICAGO_STATION_NAMES<span style="color: #93a8c6;">[</span>0<span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">]</span></code>
<code>    first<span style="color: #8c8c8c;">[</span>first.TYPE == PRECIPITATION_TYPE<span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'first_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #61afef;">second</span> = df<span style="color: #8c8c8c;">[</span>weather_df.STATION == CHICAGO_STATION_NAMES<span style="color: #93a8c6;">[</span>1<span style="color: #93a8c6;">]</span><span style="color: #8c8c8c;">]</span></code>
<code>    second<span style="color: #8c8c8c;">[</span>second.TYPE == PRECIPITATION_TYPE<span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'second_fig.png'</span><span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> <span style="color: #8c8c8c;">(</span>first<span style="color: #93a8c6;">[</span>first.TYPE == PRECIPITATION_TYPE<span style="color: #93a8c6;">]</span>.mean<span style="color: #93a8c6;">()</span>,</code>
<code>            second<span style="color: #93a8c6;">[</span>second.TYPE == PRECIPITATION_TYPE<span style="color: #93a8c6;">]</span>.mean<span style="color: #93a8c6;">()</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-org48c9ebc">
<h4 id="org48c9ebc">DRY</h4>
<aside class="notes">
<p>
En este ejemplo, hemos hecho una funcipón auziliar. También, la
función tiene un mejor nombre, no carga el <i>dataframe</i> en la función,
y el <i>docstring</i> especifica que las entradas, salidas y sus tipos.
</p>

</aside>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">plot_precipitation</span><span style="color: #8c8c8c;">(</span>df, station_id, output_file=<span style="color: #98be65;">'out.png'</span><span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">""" Plot the preciptation at the passed weather station and return</span></code>
<code><span style="color: #9eac8c;">    the mean precipitation among all values.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">pd.DataFrame df</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> NOAA data (see parsers.py for more info)</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">str station_id</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The station to plot</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">str output_file</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> Where to store the output plot</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The mean precipitation in the data frame</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> float</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">res_df</span> = df<span style="color: #8c8c8c;">[</span>df.STATION == station_id<span style="color: #8c8c8c;">]</span></code>
<code>    res_df<span style="color: #8c8c8c;">[</span>res_df.TYPE == PRECIPITATION_TYPE<span style="color: #8c8c8c;">][</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.plot<span style="color: #8c8c8c;">()</span></code>
<code>    plt.title<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Precipitation values"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.xlabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Day"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.ylabel<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">"Value"</span><span style="color: #8c8c8c;">)</span></code>
<code>    plt.savefig<span style="color: #8c8c8c;">(</span>output_file<span style="color: #8c8c8c;">)</span></code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> res_df<span style="color: #8c8c8c;">[</span><span style="color: #98be65;">'VALUE'</span><span style="color: #8c8c8c;">]</span>.mean<span style="color: #8c8c8c;">()</span></code>
<code></code>
<code></code>
<code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">precipitation_in_chicago</span><span style="color: #8c8c8c;">()</span>:</code>
<code>    <span style="color: #9eac8c;">""" Saves plots of the precipitation from two Chicago weather stations</span></code>
<code><span style="color: #9eac8c;">    in 2016 to `first_fig.png` and `second_fig.png` and returns the mean</span></code>
<code><span style="color: #9eac8c;">    precipitation at them for the year.</span></code>
<code></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The mean precipitation at two weather stations in 2016</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> (float, float)</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #61afef;">df</span> = pd.read_csv<span style="color: #8c8c8c;">(</span><span style="color: #98be65;">'2016.csv.gz'</span>, names=WEATHER_HEADERS<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> <span style="color: #8c8c8c;">(</span>plot_precipitation<span style="color: #93a8c6;">(</span>df, CHICAGO_STATION_NAMES<span style="color: #b0b1a3;">[</span>0<span style="color: #b0b1a3;">]</span>, output_file=<span style="color: #98be65;">'first_fig.png'</span><span style="color: #93a8c6;">)</span>,</code>
<code>            plot_precipitation<span style="color: #93a8c6;">(</span>df, CHICAGO_STATION_NAMES<span style="color: #b0b1a3;">[</span>1<span style="color: #b0b1a3;">]</span>, output_file=<span style="color: #98be65;">'second_fig.png'</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-orgbce4ef8">
<h4 id="orgbce4ef8">DRY</h4>
<form><ul>
<li>Usa funciones para no repetirte a ti mismo</li>
<li>Regla de dedo: Si llevas 20 líneas de código sin hacer ningún
comentario (e.g. un <i>docstring</i>) probablemente debas de agregar uno</li>

</ul></form>

</section>
<section id="slide-org1a733ac">
<h4 id="org1a733ac">Reduce la carga cognitiva: PEP-8</h4>
<aside class="notes">
<p>
How long does it take you to understand what this function is doing?
</p>

</aside>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">GCD</span><span style="color: #8c8c8c;">(</span>a,b<span style="color: #8c8c8c;">)</span>:</code>
<code>   <span style="color: #9eac8c;">"""Return the GCD of a and b"""</span></code>
<code>   <span style="color: #61afef;">a</span>,<span style="color: #61afef;">b</span>=<span style="color: #61afef; font-weight: bold;">max</span><span style="color: #8c8c8c;">(</span>a,b<span style="color: #8c8c8c;">)</span>,<span style="color: #61afef; font-weight: bold;">min</span><span style="color: #8c8c8c;">(</span>a,b<span style="color: #8c8c8c;">)</span></code>
<code>   <span style="color: #c678dd; font-weight: bold;">return</span> b <span style="color: #c678dd; font-weight: bold;">if</span> a%b==0 <span style="color: #c678dd; font-weight: bold;">else</span> GCD<span style="color: #8c8c8c;">(</span>b,a%b<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">gcd</span><span style="color: #8c8c8c;">(</span>a, b<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""Return the GCD of a and b</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">int a</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The first number (positive)</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">int b</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The second number (positive)</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The GCD of a and b</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> int</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">if</span> a &lt; b:</code>
<code>        <span style="color: #61afef;">b</span>, <span style="color: #61afef;">a</span> = a, b</code>
<code>    <span style="color: #c678dd; font-weight: bold;">if</span> a % b:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> gcd<span style="color: #8c8c8c;">(</span>b, a%b<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> b</code>
</pre>
</div>


</section>
<section id="slide-org75261bd">
<h4 id="org75261bd">¿Qué hace a esta implementación mejor?</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">gcd</span><span style="color: #8c8c8c;">(</span>a, b<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">"""Return the GCD of a and b</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">int a</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The first number (positive)</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">param</span><span style="color: #9eac8c;"> </span><span style="color: #61afef;">int b</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The second number (positive)</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">return</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> The GCD of a and b</span></code>
<code><span style="color: #9eac8c;">    </span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #61afef;">rtype</span><span style="color: #c678dd; font-weight: bold;">:</span><span style="color: #9eac8c;"> int</span></code>
<code><span style="color: #9eac8c;">    """</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">if</span> a &lt; b:</code>
<code>        <span style="color: #61afef;">b</span>, <span style="color: #61afef;">a</span> = a, b</code>
<code>    <span style="color: #c678dd; font-weight: bold;">if</span> a % b:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> gcd<span style="color: #8c8c8c;">(</span>b, a%b<span style="color: #8c8c8c;">)</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> b</code>
</pre>
</div>

</section>
<section id="slide-org770b456">
<h4 id="org770b456">PEP-8</h4>
<form><ul>
<li>79 character lines</li>
<li>function_names are snake_case</li>
<li>ClassNames are CamelCase</li>
<li>CONSTANT_NAMES are BIG_CASE</li>
<li>One statement per line</li>
<li>Use spaces not tabs!</li>

</ul></form>

</section>
<section id="slide-org024b343">
<h4 id="org024b343">Puedes usar PEP-8 de manera automática</h4>
<p>
Instala <code>autopep8</code>
</p>
<div class="org-src-container">

<pre  class="src src-shell"><code>pip install autopep8</code>
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-shell"><code>autopep8 --in-place mi_archivo.py</code>
</pre>
</div>


</section>
<section id="slide-org0f1b809">
<h4 id="org0f1b809">The Only Law of Good Coding</h4>
<p>
Code is for humans, not computers
</p>

<p>
Give things informative names
Document inputs and outputs
Don't repeat yourself (or others!)
PEP-8 is your friend
</p>

</section>
<section id="slide-org3005818">
<h4 id="org3005818">Fix this class!</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">class</span> <span style="color: #61afef;">myclass</span><span style="color: #8c8c8c;">(</span><span style="color: #61afef; font-weight: bold;">object</span><span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">__init__</span><span style="color: #8c8c8c;">(</span><span style="color: #c678dd; font-weight: bold;">self</span>, R, I<span style="color: #8c8c8c;">)</span>:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">self</span>.R = R</code>
<code>        <span style="color: #c678dd; font-weight: bold;">self</span>.I = I</code>
<code></code>
<code>    <span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">Multiply</span><span style="color: #8c8c8c;">(</span><span style="color: #c678dd; font-weight: bold;">self</span>, other<span style="color: #8c8c8c;">)</span>:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> myclass<span style="color: #8c8c8c;">(</span><span style="color: #c678dd; font-weight: bold;">self</span>.R * other.R - <span style="color: #c678dd; font-weight: bold;">self</span>.I * other.I,</code>
<code>                       <span style="color: #c678dd; font-weight: bold;">self</span>.R * other.I + <span style="color: #c678dd; font-weight: bold;">self</span>.I * other.R<span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-orge81a4b8">
<h4 id="orge81a4b8">Fix this function!</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">bang</span><span style="color: #8c8c8c;">(</span>n<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #c678dd; font-weight: bold;">return</span> n == 1 <span style="color: #c678dd; font-weight: bold;">or</span> <span style="color: #8c8c8c;">(</span>n * bang<span style="color: #93a8c6;">(</span>n<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span></code>
</pre>
</div>

</section>
<section id="slide-orgd4f4a49">
<h4 id="orgd4f4a49">Fix this function!</h4>
<div class="org-src-container">

<pre  class="src src-jupyter-python"><code><span style="color: #c678dd; font-weight: bold;">def</span> <span style="color: #61afef;">read_data</span><span style="color: #8c8c8c;">(</span>filename<span style="color: #8c8c8c;">)</span>:</code>
<code>    <span style="color: #9eac8c;">""" Return the precipitation field from the csv passed in """</span></code>
<code>    <span style="color: #c678dd; font-weight: bold;">with</span> <span style="color: #61afef; font-weight: bold;">open</span><span style="color: #8c8c8c;">(</span>filename, <span style="color: #98be65;">'r'</span><span style="color: #8c8c8c;">)</span> <span style="color: #c678dd; font-weight: bold;">as</span> f:</code>
<code>        <span style="color: #c678dd; font-weight: bold;">return</span> <span style="color: #8c8c8c;">[</span>line.split<span style="color: #93a8c6;">(</span><span style="color: #98be65;">','</span><span style="color: #93a8c6;">)[</span>2<span style="color: #93a8c6;">]</span> <span style="color: #c678dd; font-weight: bold;">for</span> line <span style="color: #c678dd; font-weight: bold;">in</span> f<span style="color: #8c8c8c;">]</span></code>
</pre>
</div>


</section>
<section id="slide-org8c6c4f0">
<h4 id="org8c6c4f0">Escalar</h4>
<ul class="org-ul">
<li><a id="orgabfffcc"></a>GNU Parallel<br />
<form><ul>
<li><a href="https://livefreeordichotomize.com/2019/06/04/using_awk_and_r_to_parse_25tb/">https://livefreeordichotomize.com/2019/06/04/using_awk_and_r_to_parse_25tb/</a></li>
<li><a href="https://niektemme.com/2015/08/09/smart-thermostat/">https://niektemme.com/2015/08/09/smart-thermostat/</a></li>
<li><a href="https://randyzwitch.com/gnu-parallel-medium-data/">https://randyzwitch.com/gnu-parallel-medium-data/</a></li>
<li><a href="http://www.rankfocus.com/hello-world/">http://www.rankfocus.com/hello-world/</a></li>
<li><a href="http://kenneth.geisshirt.dk/2012/10/11/mapreduce-and-gnu-parallel/">http://kenneth.geisshirt.dk/2012/10/11/mapreduce-and-gnu-parallel/</a></li>
<li><a href="https://grapeot.me/easy-and-cheap-cluster-building-on-aws.html">https://grapeot.me/easy-and-cheap-cluster-building-on-aws.html</a></li>
<li><a href="https://www.gnu.org/software/parallel/">https://www.gnu.org/software/parallel/</a></li>

</ul></form>
</li>


<li><a id="org9b9e2a0"></a>Dask<br /></li>

<li><a id="org67e4943"></a>La nube<br /></li>
</ul>
</div>
</div>
<p> Basado en: </p>
<script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js"></script>
<script src="http://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,
width: 1920,
height: 1080,
margin: 0.10,
minScale: 1.00,
maxScale: 1.00,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'fade', // see README of reveal.js for options
transitionSpeed: 'fast',
controlsTutorial: false, controlsLayout: 'edges',

// Optional libraries used to extend reveal.js
dependencies: [
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'http://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

});
</script>
<script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js"></script>
<script>
/* Recompute layout upon changes by klipse.  Code fragment from
   asciidoctor-revealjs-klipse by Timothy Pratley under GPLv3:
   https://github.com/timothypratley/asciidoctor-revealjs-klipse/blob/master/docs/docinfo-footer.html */
Reveal.addEventListener( 'slidechanged', function( event ) {
    window.dispatchEvent( new Event('resize') );
} );
</script>
</body>
</html>
